{"remainingRequest":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\babel-loader\\lib\\index.js!H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\components\\SearchHistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\components\\SearchHistory.vue","mtime":1578567392000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTZWFyY2hIaXN0b3J5IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGlzdG9yeTogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBDbGlja2RlbGV0ZUZuOiBmdW5jdGlvbiBDbGlja2RlbGV0ZUZuKCkgewogICAgICAvLyDliKDpmaTmnKzlnLDnvJPlrZjnmoTmlbDmja4KICAgICAgdmFyIFNlYXJjaCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlNlYXJjaCIpKTsKICAgICAgU2VhcmNoLktleVdvcmRzID0gW107CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJTZWFyY2giLCBKU09OLnN0cmluZ2lmeShTZWFyY2gpKTsgLy8g5Yig6ZmkZGF0YeS4tOaXtuS/neWtmOeahAoKICAgICAgdGhpcy5oaXN0b3J5ID0gW107CiAgICB9LAogICAgLy8g6YCG6L2s5pWw57uECiAgICByZXZlcnNlQXJyOiBmdW5jdGlvbiByZXZlcnNlQXJyKGFycikgewogICAgICB2YXIgbmV3QXJyID0gW107CgogICAgICBmb3IgKHZhciBpID0gYXJyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgbmV3QXJyLnB1c2goYXJyW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ld0FycjsKICAgIH0sCiAgICByb3V0ZWdvU2VhcmNoTGlzdENsaWNrRm46IGZ1bmN0aW9uIHJvdXRlZ29TZWFyY2hMaXN0Q2xpY2tGbihpdGVtKSB7CiAgICAgIC8vIOS/neWtmOaQnOe0ouiusOW9lQogICAgICAvLyDpnIDopoHliKTmlq3mmK/lkKbmmK/pppbmrKHlrZjlgqgKICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UuU2VhcmNoKSB7CiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCLpppbmrKEiKTsKICAgICAgICB2YXIgU2VhcmNoID0gewogICAgICAgICAgS2V5V29yZHM6IFtdCiAgICAgICAgfTsKICAgICAgICBTZWFyY2guS2V5V29yZHMucHVzaCh0aGlzLnZhbHVlKTsgLy8g6YeN5paw6K6+572u77yM5pu05paw5pen55qE77yM5L+d5a2Y5L2c55SoCgogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJTZWFyY2giLCBKU09OLnN0cmluZ2lmeShTZWFyY2gpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX1NlYXJjaCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlNlYXJjaCIpKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfU2VhcmNoLktleVdvcmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoaXRlbSA9PT0gX1NlYXJjaC5LZXlXb3Jkc1tpXSkgewogICAgICAgICAgICBfU2VhcmNoLktleVdvcmRzLnNwbGljZShpLCAxKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF9TZWFyY2guS2V5V29yZHMucHVzaChpdGVtKTsgLy8g6YeN5paw6K6+572u77yM5pu05paw5pen55qE77yM5L+d5a2Y5L2c55SoCgoKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiU2VhcmNoIiwgSlNPTi5zdHJpbmdpZnkoX1NlYXJjaCkpOwogICAgICB9IC8vIOi3s+i9rOi3r+eUsQoKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL1NlYXJjaExpc3QiLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICB2YWx1ZTogaXRlbQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIHN0ciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJTZWFyY2giKTsKICAgIHRoaXMuaGlzdG9yeSA9IHRoaXMucmV2ZXJzZUFycihKU09OLnBhcnNlKHN0cikuS2V5V29yZHMpOwogIH0KfTs="},{"version":3,"sources":["SearchHistory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;AACA,MAAA,MAAA,CAAA,QAAA,GAAA,EAAA;AACA,MAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,IAAA,CAAA,SAAA,CAAA,MAAA,CAAA,EAJA,CAMA;;AACA,WAAA,OAAA,GAAA,EAAA;AACA,KATA;AAUA;AACA,IAAA,UAXA,sBAWA,GAXA,EAWA;AACA,UAAA,MAAA,GAAA,EAAA;;AACA,WAAA,IAAA,CAAA,GAAA,GAAA,CAAA,MAAA,GAAA,CAAA,EAAA,CAAA,IAAA,CAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,CAAA;AACA;;AACA,aAAA,MAAA;AACA,KAjBA;AAkBA,IAAA,wBAlBA,oCAkBA,IAlBA,EAkBA;AACA;AACA;AACA,UAAA,CAAA,YAAA,CAAA,MAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,YAAA,MAAA,GAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,KAAA,EAHA,CAIA;;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,IAAA,CAAA,SAAA,CAAA,MAAA,CAAA;AACA,OANA,MAMA;AACA,YAAA,OAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA,CAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,OAAA,CAAA,QAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,IAAA,KAAA,OAAA,CAAA,QAAA,CAAA,CAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA;AACA;;AACA,QAAA,OAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,EAPA,CAQA;;;AACA,QAAA,YAAA,CAAA,OAAA,CAAA,QAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA,CAAA;AACA,OAnBA,CAqBA;;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,aADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,KAAA,EAAA;AADA;AAFA,OAAA;AAMA;AA9CA,GAPA;AAuDA,EAAA,OAvDA,qBAuDA;AACA,QAAA,GAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA;AACA,SAAA,OAAA,GAAA,KAAA,UAAA,CAAA,IAAA,CAAA,KAAA,CAAA,GAAA,EAAA,QAAA,CAAA;AACA;AA1DA,CAAA","sourcesContent":["<template>\r\n  <div class=\"history\">\r\n    <div class=\"history-box\">\r\n      <div class=\"title\">\r\n        <div class=\"title-text\">搜索历史</div>\r\n        <div class=\"icon-delete\" @click.stop=\"ClickdeleteFn\">删除历史</div>\r\n      </div>\r\n      <div class=\"list\">\r\n        <ul>\r\n          <li\r\n            v-for=\"(item, index) in history\"\r\n            :key=\"index\"\r\n            @click.stop=\"routegoSearchListClickFn(item)\"\r\n          >{{item}}</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"SearchHistory\",\r\n  data() {\r\n    return {\r\n      history: []\r\n    };\r\n  },\r\n  methods: {\r\n    ClickdeleteFn() {\r\n      // 删除本地缓存的数据\r\n      var Search = JSON.parse(localStorage.getItem(\"Search\"));\r\n      Search.KeyWords = [];\r\n      localStorage.setItem(\"Search\", JSON.stringify(Search));\r\n\r\n      // 删除data临时保存的\r\n      this.history = [];\r\n    },\r\n    // 逆转数组\r\n    reverseArr(arr) {\r\n      var newArr = [];\r\n      for (let i = arr.length - 1; i >= 0; i--) {\r\n        newArr.push(arr[i]);\r\n      }\r\n      return newArr;\r\n    },\r\n    routegoSearchListClickFn(item) {\r\n      // 保存搜索记录\r\n      // 需要判断是否是首次存储\r\n      if (!localStorage.Search) {\r\n        window.console.log(\"首次\");\r\n        let Search = { KeyWords: [] };\r\n        Search.KeyWords.push(this.value);\r\n        // 重新设置，更新旧的，保存作用\r\n        localStorage.setItem(\"Search\", JSON.stringify(Search));\r\n      } else {\r\n        let Search = JSON.parse(localStorage.getItem(\"Search\"));\r\n        for (let i = 0; i < Search.KeyWords.length; i++) {\r\n          if (item === Search.KeyWords[i]) {\r\n            Search.KeyWords.splice(i, 1);\r\n          }\r\n        }\r\n        Search.KeyWords.push(item);\r\n        // 重新设置，更新旧的，保存作用\r\n        localStorage.setItem(\"Search\", JSON.stringify(Search));\r\n      }\r\n\r\n      // 跳转路由\r\n      this.$router.push({\r\n        path: \"/SearchList\",\r\n        query: {\r\n          value: item\r\n        }\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    let str = localStorage.getItem(\"Search\");\r\n    this.history = this.reverseArr(JSON.parse(str).KeyWords);\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.history {\r\n  width: 100%;\r\n  padding: 0 15px;\r\n  margin-top: 30px;\r\n  .history-box {\r\n    width: 100%;\r\n    .title {\r\n      width: 100%;\r\n      height: 0.8rem;\r\n      display: flex;\r\n      text-align: left;\r\n      .title-text {\r\n        flex: 1;\r\n        height: 100%;\r\n        line-height: 0.8rem;\r\n        font-size: 0.58867rem;\r\n        color: #6b6b6b;\r\n      }\r\n      .icon-delete {\r\n        width: 65px;\r\n        height: 100%;\r\n        line-height: 0.8rem;\r\n        color: #8a8a8a;\r\n        font-size: 0.32rem;\r\n        position: relative;\r\n        &::after {\r\n          content: \"\";\r\n          display: block;\r\n          width: 0.42667rem;\r\n          height: 0.42667rem;\r\n          background-image: url(../assets/history-delete.png);\r\n          background-size: 100% 100%;\r\n          background-repeat: no-repeat;\r\n          position: absolute;\r\n          top: 50%;\r\n          margin-top: -0.21333rem;\r\n          right: 0;\r\n        }\r\n      }\r\n    }\r\n    .list {\r\n      width: 100%;\r\n      ul {\r\n        width: 100%;\r\n        li {\r\n          width: 100%;\r\n          height: 1.38667rem;\r\n          border-bottom: 1px solid #ebebf0;\r\n\r\n          line-height: 1.38667rem;\r\n          color: #9b9ba3;\r\n          font-size: 0.4533rem;\r\n          text-align: left;\r\n\r\n          white-space: nowrap;\r\n          text-emphasis: ellipsis;\r\n          overflow: hidden;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}