{"remainingRequest":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\yuedubook.vue?vue&type=script&lang=js&","dependencies":[{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\yuedubook.vue","mtime":1584701662000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gInZ1ZSI7DQppbXBvcnQgeXVlZHVIZWFkIGZyb20gIi4uL2NvbXBvbmVudHMveXVlZHVIZWFkIjsNCmltcG9ydCB5dWR1Rm9vdGVyIGZyb20gIi4uL2NvbXBvbmVudHMveXVlZHVGb290ZXIiOw0KaW1wb3J0IHl1ZWR1Q2F0YWxvZ3VlIGZyb20gIi4uL2NvbXBvbmVudHMveXVlZHVDYXRhbG9ndWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBlcnJvcjogZmFsc2UsDQogICAgICBpbmZvOiB7fSwNCiAgICAgIHN0YXJ0bG9hZGluZzogdHJ1ZSwNCiAgICAgIHpoYW5namllbGlzdDogbnVsbCwNCiAgICAgIC8vIOeroOiKguaVsA0KICAgICAgaW5kZXg6IDAsDQogICAgICAvLyDmlbDnu4TntKLlvJUNCiAgICAgIHBhZ2U6IDAsDQogICAgICBsaXN0OiBbXSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlLA0KDQogICAgICBjb250cm9sOiBmYWxzZSwNCiAgICAgIHNob3dDYXRhbG9ndWU6IGZhbHNlLA0KICAgICAgZm9udFNpemU6IDIwLA0KICAgICAgY2xhc3NPYmo6IHsNCiAgICAgICAgZGVmYXVsdDogdHJ1ZSwNCiAgICAgICAgbmlnaHQ6IGZhbHNlLA0KICAgICAgICBleWVzaGllbGQ6IGZhbHNlDQogICAgICB9DQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIHl1ZWR1SGVhZCwNCiAgICB5dWR1Rm9vdGVyLA0KICAgIHl1ZWR1Q2F0YWxvZ3VlDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB5dWVkdWJvb2tDbGlja0ZuKCkgew0KICAgICAgaWYgKHRoaXMuc2hvd0NhdGFsb2d1ZSkgew0KICAgICAgICB0aGlzLnNob3dDYXRhbG9ndWUgPSAhdGhpcy5zaG93Q2F0YWxvZ3VlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5jb250cm9sID0gIXRoaXMuY29udHJvbDsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNldERhdGEoeyBrZXksIHZhbHVlIH0pIHsNCiAgICAgIGlmIChrZXkgPT09ICJpbmRleCIpIHsNCiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCJpbmRleOiiq+abtOaUuSIsIHZhbHVlKTsNCiAgICAgICAgLy8gcGFnZeWtmOWcqOeahOaEj+S5iSDpmLLmraLor7fmsYLov4flkI7mj5DliY3mioppbmRleOiHquWinuS6hu+8jOWvvOiHtOa1geWQkeWtkOe7hOS7tueahGluZGV45rWB5LiL5Y675LqG5Lik5qyh77yM5Lqn55Sf54K55Ye755uu5b2V5piv5YWI57qi6KKr54K55Ye755qE5YmN5LiA56ug77yM54S25ZCO5Zyo6LCD5pW0DQogICAgICAgIHN3aXRjaCAodmFsdWUpIHsNCiAgICAgICAgICBjYXNlICItLSI6DQogICAgICAgICAgICB0aGlzW2tleV0gLT0gMjsNCiAgICAgICAgICAgIHRoaXMucGFnZSA9IHRoaXNba2V5XTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgIisrIjoNCiAgICAgICAgICAgIC8vIHRoaXNba2V5XSA9ICsrdGhpc1trZXldOw0KICAgICAgICAgICAgdGhpcy5wYWdlID0gdGhpc1trZXldOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgIHRoaXNba2V5XSA9IHZhbHVlOw0KICAgICAgICAgICAgdGhpcy5wYWdlID0gdmFsdWU7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICANCg0KICAgICAgICB0aGlzLmxpc3QgPSBbXTsNCiAgICAgICAgdGhpcy5vbkxvYWQoKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXNba2V5XSA9IHZhbHVlOw0KICAgICAgfQ0KICAgIH0sDQogICAgdXBkYXRhYm9va3JhY2soKSB7DQogICAgICAvLyDojrflj5bmnKzlnLDmlbDmja4NCiAgICAgIHZhciBib29rcmFjayA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImJvb2tyYWNrIikpOw0KICAgICAgaWYgKGJvb2tyYWNrKSB7DQogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygi5a2Y5ZyoIiwgYm9va3JhY2spOw0KICAgICAgICAvLyDlrZjlnKgNCiAgICAgICAgLy8g5Zyo5Yik5pat5pys5Lmm5piv5ZCm6KKr6ZiF6K+76L+HDQogICAgICAgIGxldCBpc2NoYW5nZSA9IHRydWU7DQogICAgICAgIC8vIOW3suiiq+mYheivu+i/h+WwseabtOaWsA0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvb2tyYWNrLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgaWYgKGJvb2tyYWNrW2ldLmlkID09PSB0aGlzLiRyb3V0ZS5xdWVyeS5pZCkgew0KICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCLlt7LooqvpmIXor7siKTsNCiAgICAgICAgICAgIC8vIOaJvuWIsOS6hu+8jOiuqeS4i+mdouS4jeeUqOaJp+ihjOS6hg0KICAgICAgICAgICAgaXNjaGFuZ2UgPSBmYWxzZTsNCiAgICAgICAgICAgIGJvb2tyYWNrW2ldLnRpbWUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgYm9va3JhY2tbaV0uaW5kZXggPSB0aGlzLmluZGV4Ow0KICAgICAgICAgICAgYm9va3JhY2sucHVzaChib29rcmFjay5zcGxpY2UoaSwgMSlbMF0pOw0KDQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8g5rKh6KKr6ZiF6K+76L+H5bCx5re75YqgDQogICAgICAgIGlmIChpc2NoYW5nZSkgew0KICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygi5LuO5pyq6ZiF6K+76L+HIik7DQogICAgICAgICAgYm9va3JhY2sucHVzaCh7DQogICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLA0KICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsDQogICAgICAgICAgICBpZDogdGhpcy4kcm91dGUucXVlcnkuaWQsDQogICAgICAgICAgICB0aXRsZTogdGhpcy5pbmZvLnRpdGxlLA0KICAgICAgICAgICAgY292ZXI6IHdpbmRvdy51bmVzY2FwZSh0aGlzLmluZm8uY292ZXIpLnNsaWNlKDcpDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygi5LiN5a2Y5Zyo77yM56ys5LiA5qyh5Yib5bu66ZiF6K+76K6w5b2V5a+56LGhIik7DQogICAgICAgIC8vIOS4jeWtmOWcqA0KICAgICAgICBib29rcmFjayA9IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLA0KICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsDQogICAgICAgICAgICBpZDogdGhpcy4kcm91dGUucXVlcnkuaWQsDQogICAgICAgICAgICB0aXRsZTogdGhpcy5pbmZvLnRpdGxlLA0KICAgICAgICAgICAgY292ZXI6IHdpbmRvdy51bmVzY2FwZSh0aGlzLmluZm8uY292ZXIpLnNsaWNlKDcpDQogICAgICAgICAgfQ0KICAgICAgICBdOw0KICAgICAgfQ0KICAgICAgd2luZG93LmNvbnNvbGUubG9nKGJvb2tyYWNrKTsNCiAgICAgIC8vIOS/neWtmOWIsOacrOWcsA0KICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJvb2tyYWNrIiwgSlNPTi5zdHJpbmdpZnkoYm9va3JhY2spKTsNCiAgICB9LA0KICAgIG9uTG9hZCgpIHsNCiAgICAgIC8vIOi/memHjOS8muWcqOi3r+eUsei/m+adpeWQju+8jOa4suafk+aXtuaJp+ihjOS4gOasoe+8jOaJgOS7pei/memHjOWkmuS6huS4gOasoeWIneWni+WMluaVsOaNrg0KICAgICAgLy8g6L+Z6YeM5Yqg5Yik5pat5piv5Li65LqG6Ziy5q2i6YeN5aSN5Yid5aeL5YyW5pWw5o2u77yM5L2/55SoaW1tZWRpYXRlLWNoZWNr77yM5Lya5a+86Ie0di1mb3Lml6Dms5Xov5vooYzmuLLmn5MNCiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygib25Mb2Fk5omn6KGMIik7DQoNCiAgICAgIFZ1ZS5heGlvcygNCiAgICAgICAgImh0dHA6Ly9ub3ZlbC5rZWxlOC5jbi9jaGFwdGVycy8iICsNCiAgICAgICAgICB0aGlzLmZvcm1hdGluZyh0aGlzLnpoYW5namllbGlzdFt0aGlzLmluZGV4XS5saW5rKQ0KICAgICAgKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHZhciBvYmogPSB7DQogICAgICAgICAgdGl0bGU6IHJlcy5kYXRhLmNoYXB0ZXIudGl0bGUsDQogICAgICAgICAgY3BDb250ZW50OiByZXMuZGF0YS5jaGFwdGVyLmNwQ29udGVudC5zcGxpdCgiXG4iKQ0KICAgICAgICB9Ow0KICAgICAgICAvLyDmt7vliqDliLDmuLLmn5PliJfooagNCiAgICAgICAgdGhpcy5saXN0LnB1c2gob2JqKTsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQoNCiAgICAgICAgLy8g6Ieq5aKe5LmL5ZCO5bCx5piv55yf5q2j55qE56ug6IqC5pWw77yM5rKh6Ieq5aKe5LmL5YmN5Y+q5piv55So5p2l5YGa5pWw57uE5LiL5qCHDQogICAgICAgIHRoaXMucGFnZSA9IHRoaXMuaW5kZXgrKzsNCg0KICAgICAgICAvLyDmm7TmlrB1cmzvvIzpmLLmraLngrnljrvkuabmnrblho3ngrnov5Tlm57nu5Pmnpzov5jmmK/ot7Plm57mnIDliJ3ov5vmnaXml7bnmoTnq6DmlbANCiAgICAgICAgaWYgKHdpbmRvdy5oaXN0b3J5KSB7DQogICAgICAgICAgLy8g6I635Y+W5b2T5YmNdXJsDQogICAgICAgICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmOw0KICAgICAgICAgIC8vIOaLvOaOpeW9k+WJjemhteeggQ0KICAgICAgICAgIGxldCBzdHIgPSB1cmwuc2xpY2UoMCwgdXJsLmluZGV4T2YoImluZGV4PSIpICsgNSArIDEpICsgdGhpcy5pbmRleDsNCiAgICAgICAgICAvLyBsZXQgbmV4dFN0ciA9IHVybC5zbGljZSh1cmwuaW5kZXhPZigiJmlkIikpOw0KICAgICAgICAgIC8vIOabtOaUuXVybA0KICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyh1cmwpOw0KICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhzdHIpOw0KICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBzdHIpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy51cGRhdGFib29rcmFjaygpOw0KDQogICAgICAgIC8vIOWmguaenOmYheivu+eahOS5pu+8jOS5n+WtmOWcqOeahOS5puaetumHjO+8jOmCo+S5iOS5puaetueahOmYheivu+iusOW9leS5n+imgeabtOaWsA0KICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNldEJvb2siLCB7DQogICAgICAgICAgaWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkLA0KICAgICAgICAgIHZhbHVlOiB0aGlzLmluZGV4LA0KICAgICAgICAgIGtleTogImluZGV4Ig0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZm9ybWF0aW5nKHN0cikgew0KICAgICAgLy8gOiAvID8gPQ0KICAgICAgdmFyIGFyciA9IHN0ci5zcGxpdCgiIik7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAoYXJyW2ldID09PSAiOiIpIHsNCiAgICAgICAgICBhcnJbaV0gPSAiJTNBIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYXJyW2ldID09PSAiLyIpIHsNCiAgICAgICAgICBhcnJbaV0gPSAiJTJGIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYXJyW2ldID09PSAiPyIpIHsNCiAgICAgICAgICBhcnJbaV0gPSAiJTNGIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoYXJyW2ldID09PSAiPSIpIHsNCiAgICAgICAgICBhcnJbaV0gPSAiJTNEIjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdmFyIG5ld1N0ciA9IGFyci5qb2luKCIiKTsNCiAgICAgIHJldHVybiBuZXdTdHI7DQogICAgfQ0KICB9LA0KICBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7DQogICAgd2luZG93LmNvbnNvbGUubG9nKCJiZWZvcmVSb3V0ZUVudGVy5byA5aeL5omn6KGMIik7DQogICAgLy8gdG/lkoxmcm9t6YO95YKo5a2Y55qE5piv6Lev55Sx55qEJHJvdXRl5a+56LGhDQogICAgLy8gdG/mmK/mjIfooqvorr/pl67nmoTot6/nlLHvvIzkuZ/lsLHmmK/lvZPliY3ot6/nlLENCiAgICAvLyBmcm9t5oyH55qE5piv5LuO5ZOq5Liq6Lev55Sx6Lez6L+H5p2l55qE77yM5LiK5LiA5Liq6Lev55SxDQoNCiAgICAvLyAxLjAg56ys5LiA6K+35rGC5Lmm5rqQaWQNCiAgICBWdWUuYXhpb3MoDQogICAgICAiaHR0cDovL25vdmVsLmtlbGU4LmNuL2Jvb2stc291cmNlcz92aWV3PXN1bW1hcnkmYm9vaz0iICsgdG8ucXVlcnkuaWQNCiAgICApDQogICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAvLyAyLjAg56ys5LqM5qyh6K+35rGC56ug6IqC5YiX6KGo77yM5b6X5Yiw5ZCE5Liq56ug6IqC55qEbGluaw0KICAgICAgICBWdWUuYXhpb3MoDQogICAgICAgICAgImh0dHA6Ly9ub3ZlbC5rZWxlOC5jbi9ib29rLWNoYXB0ZXJzLyIgKyByZXMuZGF0YVswXS5faWQNCiAgICAgICAgKS50aGVuKHJlczIgPT4gew0KICAgICAgICAgIC8vIOWboOS4uuesrOS4ieasoeivt+axgumcgOimgeaWueazleWkhOeQhmxpbmvlrZfnrKbkuLLvvIzmiYDku6Xov5nph4znm7TmjqXkvb/nlKhuZXh0DQogICAgICAgICAgbmV4dCh2bSA9PiB7DQogICAgICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coImJlZm9yZVJvdXRlRW50ZXLnmoRuZXh05byA5aeL5omn6KGMIik7DQogICAgICAgICAgICAvLyAyLjEg5L+d5a2Y56ys5LqM5qyh6K+35rGC55qE56ug6IqC5YiX6KGoDQogICAgICAgICAgICB2bS56aGFuZ2ppZWxpc3QgPSByZXMyLmRhdGEuY2hhcHRlcnM7DQoNCiAgICAgICAgICAgIC8vIDIuMiDliKTmlq3pobXnoIHmmK/lkKblrZjlnKjvvIzkuI3lrZjlnKjliJnpu5jorqTku47nrKzkuIDnq6DlvIDlp4vpmIXor7sNCiAgICAgICAgICAgIGlmICh0by5xdWVyeS5pbmRleCkgew0KICAgICAgICAgICAgICB2bS5pbmRleCA9IHRvLnF1ZXJ5LmluZGV4IC0gMTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHZtLmluZGV4ID0gMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZtLnN0YXJ0bG9hZGluZyA9IGZhbHNlOw0KDQogICAgICAgICAgICBWdWUuYXhpb3MNCiAgICAgICAgICAgICAgLmdldCgiaHR0cDovL25vdmVsLmtlbGU4LmNuL2Jvb2staW5mby8iICsgdG8ucXVlcnkuaWQpDQogICAgICAgICAgICAgIC50aGVuKHJlczMgPT4gew0KICAgICAgICAgICAgICAgIHZtLmluZm8gPSByZXMzLmRhdGE7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICAgIH0pDQogIH0sDQogIGJlZm9yZVJvdXRlTGVhdmUodG8sIGZyb20sIG5leHQpIHsNCiAgICAvLyDlnKjov5nph4zlj6/ku6Xov5vooYzkv53lrZjmnKzmrKHpmIXor7vorrDlvZXvvIzkv53lrZjliLDmnKzlnLANCiAgICAvLyDojrflj5bmnKzlnLDlr7nosaENCiAgICAvLyB2YXIgYm9va3JhY2sgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYm9va3JhY2snKTsNCiAgICAvLyBpZihib29rcmFjayl7DQogICAgLy8gICBib29rcmFjay55dWVkdWppbHUucHVzaCh7DQogICAgLy8gICAgIGJvb2s6ew0KICAgIC8vICAgICAgbmFtZToNCiAgICAvLyB9DQogICAgLy8gICAgIGVuZFRpbWU6IG5ldyBEYXRlKCkNCiAgICAvLyAgIH0pDQogICAgLy8gfQ0KICAgIG5leHQoKTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB3aW5kb3cuY29uc29sZS5sb2coIumYheivu+e7hOS7tuW3suWIm+W7uiIpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["yuedubook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"yuedubook.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div :class=\"{showControl: control}\">\r\n    <van-loading size=\"24px\" vertical v-show=\"startloading\">加载中...</van-loading>\r\n    <div class=\"top\">\r\n      <yueduHead :title=\"info.title\" :id=\"$route.query.id\" />\r\n    </div>\r\n\r\n    <div class=\"yuedubook\" :class=\"classObj\" @click.stop=\"yuedubookClickFn\">\r\n      <van-list\r\n        :error.sync=\"error\"\r\n        error-text=\"请求失败，点击重新加载\"\r\n        v-model=\"loading\"\r\n        :finished=\"finished\"\r\n        finished-text=\"没有更多了\"\r\n        @load=\"onLoad\"\r\n      >\r\n        <van-cell v-for=\"(item, index) in list\" :key=\"index\">\r\n          <h2 :style=\"{fontSize: (fontSize+4)+'px'}\">{{item.title}}</h2>\r\n          <div class=\"yuedubook-box\">\r\n            <p\r\n              v-for=\"(content, index) in item.cpContent\"\r\n              :key=\"index\"\r\n              :style=\"{fontSize: fontSize+'px'}\"\r\n            >{{content}}</p>\r\n          </div>\r\n          <div class=\"erweima\"></div>\r\n        </van-cell>\r\n      </van-list>\r\n    </div>\r\n    <div class=\"bottom\">\r\n      <yuduFooter @setData=\"setData\" :index=\"page\" />\r\n    </div>\r\n    <div class=\"cataloguejiemian\" :class=\"{show: showCatalogue}\">\r\n      <yueduCatalogue\r\n        :chapters=\"zhangjielist\"\r\n        @setData=\"setData\"\r\n        :obj=\"{ title:info.title,\r\n                index: this.page,}\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport yueduHead from \"../components/yueduHead\";\r\nimport yuduFooter from \"../components/yueduFooter\";\r\nimport yueduCatalogue from \"../components/yueduCatalogue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      error: false,\r\n      info: {},\r\n      startloading: true,\r\n      zhangjielist: null,\r\n      // 章节数\r\n      index: 0,\r\n      // 数组索引\r\n      page: 0,\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n\r\n      control: false,\r\n      showCatalogue: false,\r\n      fontSize: 20,\r\n      classObj: {\r\n        default: true,\r\n        night: false,\r\n        eyeshield: false\r\n      }\r\n    };\r\n  },\r\n  components: {\r\n    yueduHead,\r\n    yuduFooter,\r\n    yueduCatalogue\r\n  },\r\n  methods: {\r\n    yuedubookClickFn() {\r\n      if (this.showCatalogue) {\r\n        this.showCatalogue = !this.showCatalogue;\r\n      } else {\r\n        this.control = !this.control;\r\n      }\r\n    },\r\n    setData({ key, value }) {\r\n      if (key === \"index\") {\r\n        window.console.log(\"index被更改\", value);\r\n        // page存在的意义 防止请求过后提前把index自增了，导致流向子组件的index流下去了两次，产生点击目录是先红被点击的前一章，然后在调整\r\n        switch (value) {\r\n          case \"--\":\r\n            this[key] -= 2;\r\n            this.page = this[key];\r\n            break;\r\n          case \"++\":\r\n            // this[key] = ++this[key];\r\n            this.page = this[key];\r\n            break;\r\n          default:\r\n            this[key] = value;\r\n            this.page = value;\r\n            break;\r\n        }\r\n        \r\n\r\n        this.list = [];\r\n        this.onLoad();\r\n      } else {\r\n        this[key] = value;\r\n      }\r\n    },\r\n    updatabookrack() {\r\n      // 获取本地数据\r\n      var bookrack = JSON.parse(localStorage.getItem(\"bookrack\"));\r\n      if (bookrack) {\r\n        window.console.log(\"存在\", bookrack);\r\n        // 存在\r\n        // 在判断本书是否被阅读过\r\n        let ischange = true;\r\n        // 已被阅读过就更新\r\n        for (let i = 0; i < bookrack.length; i++) {\r\n          if (bookrack[i].id === this.$route.query.id) {\r\n            window.console.log(\"已被阅读\");\r\n            // 找到了，让下面不用执行了\r\n            ischange = false;\r\n            bookrack[i].time = new Date();\r\n            bookrack[i].index = this.index;\r\n            bookrack.push(bookrack.splice(i, 1)[0]);\r\n\r\n            break;\r\n          }\r\n        }\r\n        // 没被阅读过就添加\r\n        if (ischange) {\r\n          window.console.log(\"从未阅读过\");\r\n          bookrack.push({\r\n            time: new Date(),\r\n            index: this.index,\r\n            id: this.$route.query.id,\r\n            title: this.info.title,\r\n            cover: window.unescape(this.info.cover).slice(7)\r\n          });\r\n        }\r\n      } else {\r\n        window.console.log(\"不存在，第一次创建阅读记录对象\");\r\n        // 不存在\r\n        bookrack = [\r\n          {\r\n            time: new Date(),\r\n            index: this.index,\r\n            id: this.$route.query.id,\r\n            title: this.info.title,\r\n            cover: window.unescape(this.info.cover).slice(7)\r\n          }\r\n        ];\r\n      }\r\n      window.console.log(bookrack);\r\n      // 保存到本地\r\n      localStorage.setItem(\"bookrack\", JSON.stringify(bookrack));\r\n    },\r\n    onLoad() {\r\n      // 这里会在路由进来后，渲染时执行一次，所以这里多了一次初始化数据\r\n      // 这里加判断是为了防止重复初始化数据，使用immediate-check，会导致v-for无法进行渲染\r\n      window.console.log(\"onLoad执行\");\r\n\r\n      Vue.axios(\r\n        \"http://novel.kele8.cn/chapters/\" +\r\n          this.formating(this.zhangjielist[this.index].link)\r\n      ).then(res => {\r\n        var obj = {\r\n          title: res.data.chapter.title,\r\n          cpContent: res.data.chapter.cpContent.split(\"\\n\")\r\n        };\r\n        // 添加到渲染列表\r\n        this.list.push(obj);\r\n        this.loading = false;\r\n\r\n        // 自增之后就是真正的章节数，没自增之前只是用来做数组下标\r\n        this.page = this.index++;\r\n\r\n        // 更新url，防止点去书架再点返回结果还是跳回最初进来时的章数\r\n        if (window.history) {\r\n          // 获取当前url\r\n          let url = window.location.href;\r\n          // 拼接当前页码\r\n          let str = url.slice(0, url.indexOf(\"index=\") + 5 + 1) + this.index;\r\n          // let nextStr = url.slice(url.indexOf(\"&id\"));\r\n          // 更改url\r\n          window.console.log(url);\r\n          window.console.log(str);\r\n          window.history.pushState(null, null, str);\r\n        }\r\n\r\n        this.updatabookrack();\r\n\r\n        // 如果阅读的书，也存在的书架里，那么书架的阅读记录也要更新\r\n        this.$store.commit(\"setBook\", {\r\n          id: this.$route.query.id,\r\n          value: this.index,\r\n          key: \"index\"\r\n        });\r\n      });\r\n    },\r\n    formating(str) {\r\n      // : / ? =\r\n      var arr = str.split(\"\");\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i] === \":\") {\r\n          arr[i] = \"%3A\";\r\n        }\r\n        if (arr[i] === \"/\") {\r\n          arr[i] = \"%2F\";\r\n        }\r\n        if (arr[i] === \"?\") {\r\n          arr[i] = \"%3F\";\r\n        }\r\n        if (arr[i] === \"=\") {\r\n          arr[i] = \"%3D\";\r\n        }\r\n      }\r\n      var newStr = arr.join(\"\");\r\n      return newStr;\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    window.console.log(\"beforeRouteEnter开始执行\");\r\n    // to和from都储存的是路由的$route对象\r\n    // to是指被访问的路由，也就是当前路由\r\n    // from指的是从哪个路由跳过来的，上一个路由\r\n\r\n    // 1.0 第一请求书源id\r\n    Vue.axios(\r\n      \"http://novel.kele8.cn/book-sources?view=summary&book=\" + to.query.id\r\n    )\r\n      .then(res => {\r\n        // 2.0 第二次请求章节列表，得到各个章节的link\r\n        Vue.axios(\r\n          \"http://novel.kele8.cn/book-chapters/\" + res.data[0]._id\r\n        ).then(res2 => {\r\n          // 因为第三次请求需要方法处理link字符串，所以这里直接使用next\r\n          next(vm => {\r\n            window.console.log(\"beforeRouteEnter的next开始执行\");\r\n            // 2.1 保存第二次请求的章节列表\r\n            vm.zhangjielist = res2.data.chapters;\r\n\r\n            // 2.2 判断页码是否存在，不存在则默认从第一章开始阅读\r\n            if (to.query.index) {\r\n              vm.index = to.query.index - 1;\r\n            } else {\r\n              vm.index = 0;\r\n            }\r\n            vm.startloading = false;\r\n\r\n            Vue.axios\r\n              .get(\"http://novel.kele8.cn/book-info/\" + to.query.id)\r\n              .then(res3 => {\r\n                vm.info = res3.data;\r\n              });\r\n          });\r\n        });\r\n      })\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    // 在这里可以进行保存本次阅读记录，保存到本地\r\n    // 获取本地对象\r\n    // var bookrack = localStorage.getItem('bookrack');\r\n    // if(bookrack){\r\n    //   bookrack.yuedujilu.push({\r\n    //     book:{\r\n    //      name:\r\n    // }\r\n    //     endTime: new Date()\r\n    //   })\r\n    // }\r\n    next();\r\n  },\r\n  created() {\r\n    window.console.log(\"阅读组件已创建\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less' spcode>\r\n.cataloguejiemian {\r\n  width: 80%;\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  left: -100%;\r\n  transition: all 0.3s ease;\r\n  &.show {\r\n    left: 0px;\r\n  }\r\n}\r\n.showControl {\r\n  .top {\r\n    top: 0;\r\n  }\r\n  .bottom {\r\n    bottom: 0;\r\n  }\r\n}\r\n\r\n.top,\r\n.bottom {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.top {\r\n  width: 100%;\r\n  position: fixed;\r\n  top: -150px;\r\n}\r\n\r\n.bottom {\r\n  width: 100%;\r\n  position: fixed;\r\n  bottom: -500px;\r\n}\r\n\r\n.yuedubook {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #eee6dd;\r\n\r\n  padding-top: 0.66667rem;\r\n  text-align: left;\r\n\r\n  &.night {\r\n    background-color: #0c0c0c;\r\n    h2 {\r\n      color: #888;\r\n    }\r\n    .yuedubook-box {\r\n      p {\r\n        color: #666;\r\n      }\r\n    }\r\n  }\r\n\r\n  &.eyeshield {\r\n    background-color: #b8cd8d;\r\n    h2 {\r\n      color: #0c2e10;\r\n    }\r\n    .yuedubook-box {\r\n      p {\r\n        color: rgba(12, 46, 16, 0.8);\r\n      }\r\n    }\r\n  }\r\n\r\n  h2 {\r\n    margin: 0px;\r\n    color: #333;\r\n    padding: 0 0.53333rem;\r\n    line-height: 1.5;\r\n\r\n    font-size: 24px;\r\n  }\r\n\r\n  .yuedubook-box {\r\n    color: #333;\r\n    padding: 0.26667rem 0.53333rem 0;\r\n\r\n    p {\r\n      color: #5c5d58;\r\n      // text-indent: 2em;\r\n      text-indent: 1cm;\r\n\r\n      line-height: 1.5;\r\n      margin: 0.3333rem 0;\r\n    }\r\n  }\r\n\r\n  .erweima {\r\n    width: 100%;\r\n    height: 100px;\r\n  }\r\n}\r\n</style>"]}]}