{"remainingRequest":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\Classifycation.vue?vue&type=script&lang=js&","dependencies":[{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\Classifycation.vue","mtime":1584884604000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gInZ1ZSI7DQppbXBvcnQgaGVhZHNob3QgZnJvbSAiLi4vY29tcG9uZW50cy9oZWFkc2hvdCI7DQppbXBvcnQgc2VhcmNoaXRlbSBmcm9tICIuLi9jb21wb25lbnRzL3NlYXJjaGl0ZW0iOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiU2VhcmNoTGlzdCIsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIFNlYXJjaExpc3Q6IFtdLA0KICAgICAgdHlwZTogImhvdCIsDQogICAgICBtaW5vcjogIiIsDQogICAgICBpbmRleDE6IDAsDQogICAgICBpbmRleDI6IC0xLA0KICAgICAgdG9wMTogWw0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICLng63pl6giLA0KICAgICAgICAgIHR5cGU6ICJob3QiDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuaWsOS5piIsDQogICAgICAgICAgdHlwZTogIm5ldyINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5aW96K+EIiwNCiAgICAgICAgICB0eXBlOiAicmVwdXRhdGlvbiINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5a6M57uTIiwNCiAgICAgICAgICB0eXBlOiAib3ZlciINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5YyF5pyIIiwNCiAgICAgICAgICB0eXBlOiAibW9udGhseSINCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIHRvcDI6IFtdDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHt9LA0KICBjb21wb25lbnRzOiB7DQogICAgaGVhZHNob3QsDQogICAgc2VhcmNoaXRlbQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ29Sb3V0ZXhpYW5ncWluZ3llRm4oaWQpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDogIi94aWFuZ3Fpbmd5ZSIsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgaWQ6IGlkDQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgb25DbGlja1R5cGVGbih0eXBlLCBpbmRleCkgew0KICAgICAgdGhpcy50eXBlID0gdHlwZTsNCiAgICAgIHRoaXMuaW5kZXgxID0gaW5kZXg7DQogICAgICB0aGlzLmFqYXh1cGRhdGEoKTsNCiAgICB9LA0KICAgIG9uQ2xpY2tNaW5vckZuKG1pbm9yLCBpbmRleCkgew0KICAgICAgdGhpcy5taW5vciA9IG1pbm9yOw0KICAgICAgdGhpcy5pbmRleDIgPSBpbmRleDsNCiAgICAgIHRoaXMuYWpheHVwZGF0YSgpOw0KICAgIH0sDQogICAgb25jbGlja01pbm9yT25lKCkgew0KICAgICAgdGhpcy5taW5vciA9ICIiOw0KICAgICAgdGhpcy5pbmRleDIgPSAtMTsNCiAgICAgIHRoaXMuYWpheHVwZGF0YSgpOw0KICAgIH0sDQogICAgYWpheHVwZGF0YSgpIHsNCiAgICAgIHRoaXMuYXhpb3MNCiAgICAgICAgLmdldCgNCiAgICAgICAgICAiaHR0cDovL25vdmVsLmtlbGU4LmNuL2NhdGVnb3J5LWluZm8/Z2VuZGVyPSIgKw0KICAgICAgICAgICAgdGhpcy4kcm91dGUucXVlcnkuZ2VuZGVyICsNCiAgICAgICAgICAgICImdHlwZT0iICsNCiAgICAgICAgICAgIHRoaXMudHlwZSArDQogICAgICAgICAgICAiJm1ham9yPSIgKw0KICAgICAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmlkICsNCiAgICAgICAgICAgICImbWlub3I9IiArDQogICAgICAgICAgICB0aGlzLm1pbm9yICsNCiAgICAgICAgICAgICImc3RhcnQ9MCZsaW1pdD0yMCINCiAgICAgICAgKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICB0aGlzLlNlYXJjaExpc3QgPSByZXNwb25zZS5kYXRhLmJvb2tzOw0KICAgICAgICB9KTsNCiAgICB9DQogIH0sDQogIC8vIOe7hOS7tuWGheeahOWuiOWNqw0KICAvLyDlnKjmnKznu4Tku7booqvmuLLmn5Pml7bvvIzooqvosIPnlKggLyDnu4Tku7blrp7kvovooqvliJvlu7rliY3miafooYwNCiAgLy8g5LiN6IO96LCD55SoIOe7hOS7tuWunuS+iyB0aGlzDQogIC8vIOWboOS4uuW9k+WJjeWuiOWNq+aJp+ihjOaXtu+8jOe7hOS7tuWunuS+i+i/mOayoeacieiiq+WIm+W7ug0KICBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7DQogICAgVnVlLmF4aW9zLmdldCgiaHR0cDovL25vdmVsLmtlbGU4LmNuL3N1Yi1jYXRlZ29yaWVzIikudGhlbihyZXMgPT4gew0KICAgICAgbmV4dCh2bSA9PiB7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmRhdGFbdG8ucXVlcnkuZ2VuZGVyXS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGlmIChyZXMuZGF0YVt0by5xdWVyeS5nZW5kZXJdW2ldLm1ham9yID09PSB0by5wYXJhbXMuaWQpIHsNCiAgICAgICAgICAgIHZtLnRvcDIgPSByZXMuZGF0YVt0by5xdWVyeS5nZW5kZXJdW2ldLm1pbnM7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdm0uYXhpb3MNCiAgICAgICAgICAuZ2V0KA0KICAgICAgICAgICAgImh0dHA6Ly9ub3ZlbC5rZWxlOC5jbi9jYXRlZ29yeS1pbmZvP2dlbmRlcj0iICsNCiAgICAgICAgICAgICAgdG8ucXVlcnkuZ2VuZGVyICsNCiAgICAgICAgICAgICAgIiZ0eXBlPSIgKw0KICAgICAgICAgICAgICB2bS50eXBlICsNCiAgICAgICAgICAgICAgIiZtYWpvcj0iICsNCiAgICAgICAgICAgICAgdG8ucGFyYW1zLmlkICsNCiAgICAgICAgICAgICAgIiZtaW5vcj0iICsNCiAgICAgICAgICAgICAgdm0ubWlub3IgKw0KICAgICAgICAgICAgICAiJnN0YXJ0PTAmbGltaXQ9MjAiDQogICAgICAgICAgKQ0KICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgICAgICB2bS5TZWFyY2hMaXN0ID0gcmVzcG9uc2UuZGF0YS5ib29rczsNCiAgICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0pOw0KICB9DQp9Ow0K"},{"version":3,"sources":["Classifycation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Classifycation.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"searchList\">\r\n    <headshot :title=\"$route.params.id\" />\r\n    <div class=\"wrapper\">\r\n      <div class=\"item\">\r\n        <!-- 一级筛选type -->\r\n        <div class=\"top1\">\r\n          <ul>\r\n            <li\r\n              :class=\"{active: index === index1}\"\r\n              @click.stop=\"onClickTypeFn(item.type, index)\"\r\n              v-for=\"(item, index) in top1\"\r\n              :key=\"index\"\r\n            >{{item.title}}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"item\">\r\n        <!-- 二级筛选 -->\r\n        <div class=\"top2\">\r\n          <ul>\r\n            <li @click.stop=\"onclickMinorOne\" :class=\"{active: -1 === index2}\">全部</li>\r\n            <li\r\n              @click.stop=\"onClickMinorFn(item, index)\"\r\n              :class=\"{active: index === index2}\"\r\n              v-for=\"(item, index) in top2\"\r\n              :key=\"index\"\r\n            >{{item}}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"main\">\r\n      <ul>\r\n        <li\r\n          v-for=\"(item, index) in SearchList\"\r\n          :key=\"index\"\r\n          @click.stop=\"goRoutexiangqingyeFn(item._id)\"\r\n        >\r\n          <searchitem :item=\"item\" />\r\n        </li>\r\n        <li class=\"footer\">\r\n          <span>没有更多书籍</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Vue from \"vue\";\r\nimport headshot from \"../components/headshot\";\r\nimport searchitem from \"../components/searchitem\";\r\nexport default {\r\n  name: \"SearchList\",\r\n  data() {\r\n    return {\r\n      SearchList: [],\r\n      type: \"hot\",\r\n      minor: \"\",\r\n      index1: 0,\r\n      index2: -1,\r\n      top1: [\r\n        {\r\n          title: \"热门\",\r\n          type: \"hot\"\r\n        },\r\n        {\r\n          title: \"新书\",\r\n          type: \"new\"\r\n        },\r\n        {\r\n          title: \"好评\",\r\n          type: \"reputation\"\r\n        },\r\n        {\r\n          title: \"完结\",\r\n          type: \"over\"\r\n        },\r\n        {\r\n          title: \"包月\",\r\n          type: \"monthly\"\r\n        }\r\n      ],\r\n      top2: []\r\n    };\r\n  },\r\n  computed: {},\r\n  components: {\r\n    headshot,\r\n    searchitem\r\n  },\r\n  methods: {\r\n    goRoutexiangqingyeFn(id) {\r\n      this.$router.push({\r\n        path: \"/xiangqingye\",\r\n        query: {\r\n          id: id\r\n        }\r\n      });\r\n    },\r\n    onClickTypeFn(type, index) {\r\n      this.type = type;\r\n      this.index1 = index;\r\n      this.ajaxupdata();\r\n    },\r\n    onClickMinorFn(minor, index) {\r\n      this.minor = minor;\r\n      this.index2 = index;\r\n      this.ajaxupdata();\r\n    },\r\n    onclickMinorOne() {\r\n      this.minor = \"\";\r\n      this.index2 = -1;\r\n      this.ajaxupdata();\r\n    },\r\n    ajaxupdata() {\r\n      this.axios\r\n        .get(\r\n          \"http://novel.kele8.cn/category-info?gender=\" +\r\n            this.$route.query.gender +\r\n            \"&type=\" +\r\n            this.type +\r\n            \"&major=\" +\r\n            this.$route.params.id +\r\n            \"&minor=\" +\r\n            this.minor +\r\n            \"&start=0&limit=20\"\r\n        )\r\n        .then(response => {\r\n          window.console.log(response);\r\n          this.SearchList = response.data.books;\r\n        });\r\n    }\r\n  },\r\n  // 组件内的守卫\r\n  // 在本组件被渲染时，被调用 / 组件实例被创建前执行\r\n  // 不能调用 组件实例 this\r\n  // 因为当前守卫执行时，组件实例还没有被创建\r\n  beforeRouteEnter(to, from, next) {\r\n    Vue.axios.get(\"http://novel.kele8.cn/sub-categories\").then(res => {\r\n      next(vm => {\r\n        for (let i = 0; i < res.data[to.query.gender].length; i++) {\r\n          if (res.data[to.query.gender][i].major === to.params.id) {\r\n            vm.top2 = res.data[to.query.gender][i].mins;\r\n          }\r\n        }\r\n\r\n        vm.axios\r\n          .get(\r\n            \"http://novel.kele8.cn/category-info?gender=\" +\r\n              to.query.gender +\r\n              \"&type=\" +\r\n              vm.type +\r\n              \"&major=\" +\r\n              to.params.id +\r\n              \"&minor=\" +\r\n              vm.minor +\r\n              \"&start=0&limit=20\"\r\n          )\r\n          .then(response => {\r\n            window.console.log(response);\r\n            vm.SearchList = response.data.books;\r\n          });\r\n      });\r\n    });\r\n  }\r\n};\r\n</script>\r\n<style lang='less' scoped>\r\n.searchList {\r\n  width: 100%;\r\n  height: auto;\r\n  background-color: #f5f2ed;\r\n  .main {\r\n    padding-top: 80px;\r\n    & > ul {\r\n      width: 100%;\r\n      height: auto;\r\n      margin-top: 10px;\r\n      & > li {\r\n        width: 100%;\r\n        margin-bottom: 10px;\r\n        padding-left: 15px;\r\n      }\r\n      & > li.footer {\r\n        padding: 10px 0;\r\n        margin-bottom: 0px;\r\n        height: 30px;\r\n        line-height: 0px;\r\n        span {\r\n          color: #999;\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .wrapper {\r\n    position: fixed;\r\n    top: 38px;\r\n    left: 0;\r\n    width: 100%;\r\n    color: #666;\r\n    background-color: #fff;\r\n    z-index: 100;\r\n    .item {\r\n      background-size: 100% 1px;\r\n      background-image: linear-gradient(180deg, transparent 50%, #ddd 0);\r\n      background-repeat: no-repeat;\r\n      background-position: bottom;\r\n      position: relative;\r\n      width: 100%;\r\n      height: 1.2rem;\r\n      line-height: 1.2rem;\r\n      overflow: hidden;\r\n      .top1,\r\n      .top2 {\r\n        height: 100%;\r\n        overflow-x: auto;\r\n        ul {\r\n          width: auto;\r\n          height: 100%;\r\n          white-space: nowrap;\r\n          text-overflow: ellipsis;\r\n          font-size: 0;\r\n          li {\r\n            display: inline-block;\r\n            height: 100%;\r\n            padding: 0 0.26667rem;\r\n            font-size: 13px;\r\n            text-align: left;\r\n            &.active {\r\n              color: #b93321;\r\n            }\r\n            &.first-child {\r\n              padding-left: 0.4rem;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>>\r\n"]}]}