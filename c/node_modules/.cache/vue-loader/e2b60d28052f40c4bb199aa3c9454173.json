{"remainingRequest":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\xiangqingye.vue?vue&type=script&lang=js&","dependencies":[{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\xiangqingye.vue","mtime":1584691574000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gInZ1ZSI7DQppbXBvcnQgaGVhZHNob3QgZnJvbSAiLi4vY29tcG9uZW50cy9oZWFkc2hvdCI7DQppbXBvcnQgY29tbWVudCBmcm9tICIuLi9jb21wb25lbnRzL2NvbW1lbnQiOw0KaW1wb3J0IGludGVyZXN0TGlzdCBmcm9tICIuLi9jb21wb25lbnRzL2ludGVyZXN0TGlzdCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIG5hbWU6ICLkuabnsY3or6bmg4UiLA0KICAgICAgYWN0aXZlTmFtZTogIjEiLA0KICAgICAgZGF0YToge30sDQogICAgICBwaW5sdW46IFtdLA0KICAgICAgcmVsYXRlOiBbXSwNCiAgICAgIGppZXNoYW86IGZhbHNlDQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAkcm91dGUoKSB7DQogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGNvdmVyKCkgew0KICAgICAgLy8g5Yqg5LiKc2xpY2XvvIzmmK/kuLrkuobljrvmjonlpLTpg6jnmoQvYWdlbnQvDQogICAgICByZXR1cm4gd2luZG93LnVuZXNjYXBlKHRoaXMuZGF0YS5jb3Zlcikuc2xpY2UoNyk7DQogICAgfSwNCiAgICB3b3JkQ291bnQoKSB7DQogICAgICByZXR1cm4gdGhpcy5kYXRhLndvcmRDb3VudCA+IDk5OTkNCiAgICAgICAgPyAodGhpcy5kYXRhLndvcmRDb3VudCAvIDEwMDAwKS50b0ZpeGVkKDApICsgIuS4hyINCiAgICAgICAgOiB0aGlzLmRhdGEud29yZENvdW50Ow0KICAgIH0sDQogICAgdXBkYXRlQW5kcHJvZ3Jlc3MoKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICB0aGlzLmZvcm1hdGluZyhEYXRlLm5vdygpIC0gRGF0ZS5wYXJzZSh0aGlzLmRhdGEudXBkYXRlZCksIHRydWUpICsNCiAgICAgICAgdGhpcy5kYXRhLmxhc3RDaGFwdGVyDQogICAgICApOw0KICAgIH0sDQogICAgYm9va3N0YXRlKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0Qm9va0J5SWQodGhpcy4kcm91dGUucXVlcnkuaWQpOw0KICAgIH0NCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIGhlYWRzaG90LA0KICAgIGNvbW1lbnQsDQogICAgaW50ZXJlc3RMaXN0DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgLy8g6K+35rGC6K+E6K66DQogICAgVnVlLmF4aW9zDQogICAgICAuZ2V0KCJodHRwOi8vbm92ZWwua2VsZTguY24vYm9vay9yZXZpZXdzP2Jvb2s9IiArIHRoaXMuJHJvdXRlLnF1ZXJ5LmlkKQ0KICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCLor4TorroiLCByZXMpOw0KDQogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMuZGF0YS5yZXZpZXdzLnNsaWNlKDAsIDIpKTsNCiAgICAgICAgdGhpcy5waW5sdW4gPSByZXMuZGF0YS5yZXZpZXdzLnNsaWNlKDAsIDIpOw0KICAgICAgfSk7DQogICAgLy8g6K+35rGC55u45YWz5o6o6I2QDQogICAgVnVlLmF4aW9zDQogICAgICAuZ2V0KCJodHRwOi8vbm92ZWwua2VsZTguY24vcmVjb21tZW5kLyIgKyB0aGlzLiRyb3V0ZS5xdWVyeS5pZCkNCiAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygi55u45YWz5o6o6I2QIiwgcmVzKTsNCiAgICAgICAgdGhpcy5yZWxhdGUgPSByZXMuZGF0YS5ib29rcy5zbGljZSgwLCA0KTsNCiAgICAgIH0pOw0KICB9LA0KICBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7DQogICAgLy8g6K+35rGC5Lmm57GN5L+h5oGvaW5mbw0KICAgIFZ1ZS5heGlvcw0KICAgICAgLmdldCgiaHR0cDovL25vdmVsLmtlbGU4LmNuL2Jvb2staW5mby8iICsgdG8ucXVlcnkuaWQpDQogICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygi5b2T5YmN5Lmm57GN5L+h5oGvIiwgcmVzcG9uc2UpOw0KICAgICAgICBuZXh0KHZtID0+IHsNCiAgICAgICAgICB2bS5kYXRhID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGZvcm1hdGluZyhzdHIsIGt1b2hhbykgew0KICAgICAgdmFyIG1pYW8gPSBzdHIgLyAxMDAwOw0KICAgICAgdmFyIGZlbiA9IG1pYW8gLyA2MDsNCiAgICAgIHZhciB4aWFvc2hpID0gZmVuIC8gNjA7DQogICAgICB2YXIgdGlhbiA9IHhpYW9zaGkgLyAyNDsNCiAgICAgIHZhciBwcmUgPSAiIjsNCiAgICAgIHZhciBuZXh0ID0gIiI7DQogICAgICBpZiAoa3VvaGFvKSB7DQogICAgICAgIHByZSA9ICJbIjsNCiAgICAgICAgbmV4dCA9ICJdICI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBuZXh0ID0gIiI7DQogICAgICB9DQoNCiAgICAgIGlmICh0aWFuID4gMSkgew0KICAgICAgICByZXR1cm4gcHJlICsgcGFyc2VJbnQodGlhbikgKyAi5aSp5YmN5pu05pawIiArIG5leHQ7DQogICAgICB9DQoNCiAgICAgIGlmICh4aWFvc2hpID49IDEpIHsNCiAgICAgICAgcmV0dXJuIHByZSArIHBhcnNlSW50KHhpYW9zaGkpICsgIuWwj+aXtuWJjeabtOaWsCIgKyBuZXh0Ow0KICAgICAgfSBlbHNlIGlmIChmZW4gPj0gMSkgew0KICAgICAgICByZXR1cm4gcHJlICsgcGFyc2VJbnQoZmVuKSArICLlsI/ml7bliY3mm7TmlrAiICsgbmV4dDsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdvUm91dGVyeXVlZHVib29rKCkgew0KICAgICAgLy8g5byA5aeL6ZiF6K+76L+Y5pivIOe7p+e7remYheivu++8jOmcgOimgeWIpOaWreacrOWcsOaYr+WQpuS/neWtmOacieivpeS5puexjeeahOmYheivu+iusOW9lQ0KICAgICAgdmFyIGJvb2tyYWNrID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYm9va3JhY2siKSk7DQogICAgICB2YXIgaW5kZXggPSAwOw0KICAgICAgaWYgKGJvb2tyYWNrKSB7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9va3JhY2subGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBpZiAoYm9va3JhY2tbaV0uaWQgPT09IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkKSB7DQogICAgICAgICAgICBpbmRleCA9IGJvb2tyYWNrW2ldLmluZGV4Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICIveXVlZHVib29rIiwNCiAgICAgICAgcXVlcnk6IHsNCiAgICAgICAgICBpZDogdGhpcy4kcm91dGUucXVlcnkuaWQsDQogICAgICAgICAgaW5kZXg6IGluZGV4ID8gaW5kZXggOiAxDQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBnb1JvdXRlckNhdGFrbG9ndWVGbih0aXRsZSwgY292ZXIpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDogIi9DYXRhbG9ndWUiLA0KICAgICAgICBxdWVyeTogew0KICAgICAgICAgIGlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5pZCwNCiAgICAgICAgICB0aXRsZTogdGl0bGUsDQogICAgICAgICAgY292ZXI6IGNvdmVyDQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBqaWFudG91Rm4oKSB7DQogICAgICB0aGlzLmppZXNoYW8gPSAhdGhpcy5qaWVzaGFvOw0KICAgIH0sDQoNCiAgICBhZGRCb29rRm4oKSB7DQogICAgICAvLyDnrKzkuIAg5riy5p+T5pe256Gu6K6k5Lmm5p625Lit5rKh5pyJ6K+l5LmmIOWGs+Wumua4suafk+eahOaYr+WKoOWFpeS5puaetui/mOaYr+aSpOWHuuS5puaetijnlKjnsbvlkI3mjqfliLYp77yM5p+l6K+idnVleOaVsOaNrg0KICAgICAgLy8g56ys5LqMIOehruiupOaYr+WQpumYheivu+i/h+ivpeS5piDmn6Xor6LmnKzlnLDmlbDmja4s5Li76KaB5piv6I635Y+W6aG156CBDQogICAgICAvLyB2YXIgYm9va3JhY2sgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJib29rcmFjayIpKTsNCiAgICAgIC8vIHZhciBpbmRleCA9IG51bGw7DQogICAgICAvLyBpZiAoYm9va3JhY2spIHsNCiAgICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib29rcmFjay5sZW5ndGg7IGkrKykgew0KICAgICAgLy8gICAgIGlmIChib29rcmFja1tpXS5pZCA9PT0gdGhpcy4kcm91dGUucXVlcnkuaWQpIHsNCiAgICAgIC8vICAgICAgIGluZGV4ID0gYm9va3JhY2tbaV0uaW5kZXg7DQogICAgICAvLyAgICAgfQ0KICAgICAgLy8gICB9DQogICAgICAvLyB9DQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImFkZEJvb2tyYWNrIiwgew0KICAgICAgICAvLyDln7rmnKzkv6Hmga8g5Lmm5ZCNIOWwgemdoiDpmIXor7vnq6DoioLmlbAo5pys5ZywKSAg6Led56a7546w5Zyo55qE5pe26Ze05aSa5bCR5YmN5pu05paw6L+HKOmcgOimgeagvOW8j+WMluWtl+espuS4sikNCiAgICAgICAgLy8g5pyA5ZCO5LiA56ug6IqCDQogICAgICAgIC8vIHRpdGxlOiB0aGlzLmRhdGEudGl0bGUsDQogICAgICAgIC8vIGNvdmVyOiB0aGlzLmNvdmVyLA0KICAgICAgICBpZDogdGhpcy4kcm91dGUucXVlcnkuaWQNCiAgICAgICAgLy8gaW5kZXg6IGluZGV4ID8gaW5kZXggOiAxLA0KICAgICAgICAvLyB0aW1lOg0KICAgICAgICAvLyAgIHRoaXMuZm9ybWF0aW5nKERhdGUubm93KCkgLSBEYXRlLnBhcnNlKHRoaXMuZGF0YS51cGRhdGVkKSwgZmFsc2UpICsNCiAgICAgICAgLy8gICAiIDogIiArDQogICAgICAgIC8vICAgdGhpcy5kYXRhLmxhc3RDaGFwdGVyDQogICAgICB9KTsNCiAgICB9LA0KDQogICAgZGVsZXRlQm9va0ZuKCkgew0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJkZWxldGVCb29rIiwgdGhpcy4kcm91dGUucXVlcnkuaWQpOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["xiangqingye.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"xiangqingye.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"xiangqingye\">\r\n    <headshot class=\"head\" :title=\"name\" />\r\n    <section class=\"shuxinxi\">\r\n      <div class=\"shuxinxi_wrapper\">\r\n        <div class=\"left\">\r\n          <img :src=\"cover\" alt />\r\n        </div>\r\n        <div class=\"right\">\r\n          <h4>{{data.title}}</h4>\r\n          <div>\r\n            <span>{{data.author}}</span>\r\n            <span>|</span>\r\n            <span>{{data.cat}}</span>\r\n            <span>|</span>\r\n            <span>{{wordCount}}字</span>\r\n          </div>\r\n          <span>{{this.data._gg? '完结' : formating(Date.now() - Date.parse(this.data.updated), false)}}</span>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <section class=\"anniu\">\r\n      <div class=\"btn-wrapper\">\r\n        <div class=\"left delete\" @click.stop=\"deleteBookFn\" v-show=\"bookstate\">撤出书架</div>\r\n        <div class=\"left\" @click.stop=\"addBookFn\" v-show=\"!bookstate\">加入书架</div>\r\n        <div class=\"right\" @click.stop=\"goRouteryuedubook\">开始阅读</div>\r\n      </div>\r\n    </section>\r\n    <section class=\"renqi\">\r\n      <div class=\"item\">\r\n        <p>追人气</p>\r\n        <span>{{(data.latelyFollower/10000).toFixed(1)}}万</span>\r\n      </div>\r\n      <div class=\"item\">\r\n        <p>读者留存率</p>\r\n        <span>{{data.retentionRatio}}%</span>\r\n      </div>\r\n      <div class=\"item\">\r\n        <p>日更字数/天</p>\r\n        <span>{{data.serializeWordCount}}</span>\r\n      </div>\r\n    </section>\r\n    <section class=\"juqing\">\r\n      <div class=\"text\" :style=\"{display: jieshao?'block':'-webkit-box'}\">{{data.longIntro}}</div>\r\n      <div\r\n        class=\"jiantou\"\r\n        :style=\"{transform: jieshao? 'rotate(180deg)' : ''}\"\r\n        @click.stop=\"jiantouFn\"\r\n      ></div>\r\n    </section>\r\n    <section class=\"mulu\">\r\n      <div class=\"mulu-box\">\r\n        目录\r\n        <div\r\n          class=\"right\"\r\n          @click.stop=\"goRouterCataklogueFn(data.title, cover)\"\r\n        >{{updateAndprogress}}</div>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 热门书评 -->\r\n    <section class=\"remenshupin\">\r\n      <div class=\"pinlun\">\r\n        <div class=\"title\">热门书评</div>\r\n        <comment v-for=\"(item, index) in pinlun\" :key=\"index\" :obj=\"item\" />\r\n      </div>\r\n    </section>\r\n\r\n    <!-- 无评论时显示 -->\r\n    <section class=\"lingpinlun\"></section>\r\n\r\n    <!-- 相关推荐 -->\r\n    <section class=\"relate\">\r\n      <interestList :obj=\"relate\" />\r\n    </section>\r\n\r\n    <!-- 版权声明 -->\r\n    <section class=\"banquan\"></section>\r\n\r\n    <!-- 底部 -->\r\n    <section class=\"footer\"></section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport headshot from \"../components/headshot\";\r\nimport comment from \"../components/comment\";\r\nimport interestList from \"../components/interestList\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      name: \"书籍详情\",\r\n      activeName: \"1\",\r\n      data: {},\r\n      pinlun: [],\r\n      relate: [],\r\n      jieshao: false\r\n    };\r\n  },\r\n  watch: {\r\n    $route() {\r\n      window.location.reload();\r\n    }\r\n  },\r\n  computed: {\r\n    cover() {\r\n      // 加上slice，是为了去掉头部的/agent/\r\n      return window.unescape(this.data.cover).slice(7);\r\n    },\r\n    wordCount() {\r\n      return this.data.wordCount > 9999\r\n        ? (this.data.wordCount / 10000).toFixed(0) + \"万\"\r\n        : this.data.wordCount;\r\n    },\r\n    updateAndprogress() {\r\n      return (\r\n        this.formating(Date.now() - Date.parse(this.data.updated), true) +\r\n        this.data.lastChapter\r\n      );\r\n    },\r\n    bookstate() {\r\n      return this.$store.getters.getBookById(this.$route.query.id);\r\n    }\r\n  },\r\n  components: {\r\n    headshot,\r\n    comment,\r\n    interestList\r\n  },\r\n  created() {\r\n    // 请求评论\r\n    Vue.axios\r\n      .get(\"http://novel.kele8.cn/book/reviews?book=\" + this.$route.query.id)\r\n      .then(res => {\r\n        window.console.log(\"评论\", res);\r\n\r\n        window.console.log(res.data.reviews.slice(0, 2));\r\n        this.pinlun = res.data.reviews.slice(0, 2);\r\n      });\r\n    // 请求相关推荐\r\n    Vue.axios\r\n      .get(\"http://novel.kele8.cn/recommend/\" + this.$route.query.id)\r\n      .then(res => {\r\n        window.console.log(\"相关推荐\", res);\r\n        this.relate = res.data.books.slice(0, 4);\r\n      });\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    // 请求书籍信息info\r\n    Vue.axios\r\n      .get(\"http://novel.kele8.cn/book-info/\" + to.query.id)\r\n      .then(response => {\r\n        window.console.log(\"当前书籍信息\", response);\r\n        next(vm => {\r\n          vm.data = response.data;\r\n        });\r\n      });\r\n  },\r\n  methods: {\r\n    formating(str, kuohao) {\r\n      var miao = str / 1000;\r\n      var fen = miao / 60;\r\n      var xiaoshi = fen / 60;\r\n      var tian = xiaoshi / 24;\r\n      var pre = \"\";\r\n      var next = \"\";\r\n      if (kuohao) {\r\n        pre = \"[\";\r\n        next = \"] \";\r\n      } else {\r\n        next = \"\";\r\n      }\r\n\r\n      if (tian > 1) {\r\n        return pre + parseInt(tian) + \"天前更新\" + next;\r\n      }\r\n\r\n      if (xiaoshi >= 1) {\r\n        return pre + parseInt(xiaoshi) + \"小时前更新\" + next;\r\n      } else if (fen >= 1) {\r\n        return pre + parseInt(fen) + \"小时前更新\" + next;\r\n      }\r\n    },\r\n    goRouteryuedubook() {\r\n      // 开始阅读还是 继续阅读，需要判断本地是否保存有该书籍的阅读记录\r\n      var bookrack = JSON.parse(localStorage.getItem(\"bookrack\"));\r\n      var index = 0;\r\n      if (bookrack) {\r\n        for (let i = 0; i < bookrack.length; i++) {\r\n          if (bookrack[i].id === this.$route.query.id) {\r\n            index = bookrack[i].index;\r\n          }\r\n        }\r\n      }\r\n\r\n      this.$router.push({\r\n        path: \"/yuedubook\",\r\n        query: {\r\n          id: this.$route.query.id,\r\n          index: index ? index : 1\r\n        }\r\n      });\r\n    },\r\n\r\n    goRouterCataklogueFn(title, cover) {\r\n      this.$router.push({\r\n        path: \"/Catalogue\",\r\n        query: {\r\n          id: this.$route.query.id,\r\n          title: title,\r\n          cover: cover\r\n        }\r\n      });\r\n    },\r\n\r\n    jiantouFn() {\r\n      this.jieshao = !this.jieshao;\r\n    },\r\n\r\n    addBookFn() {\r\n      // 第一 渲染时确认书架中没有该书 决定渲染的是加入书架还是撤出书架(用类名控制)，查询vuex数据\r\n      // 第二 确认是否阅读过该书 查询本地数据,主要是获取页码\r\n      // var bookrack = JSON.parse(localStorage.getItem(\"bookrack\"));\r\n      // var index = null;\r\n      // if (bookrack) {\r\n      //   for (let i = 0; i < bookrack.length; i++) {\r\n      //     if (bookrack[i].id === this.$route.query.id) {\r\n      //       index = bookrack[i].index;\r\n      //     }\r\n      //   }\r\n      // }\r\n      this.$store.commit(\"addBookrack\", {\r\n        // 基本信息 书名 封面 阅读章节数(本地)  距离现在的时间多少前更新过(需要格式化字符串)\r\n        // 最后一章节\r\n        // title: this.data.title,\r\n        // cover: this.cover,\r\n        id: this.$route.query.id\r\n        // index: index ? index : 1,\r\n        // time:\r\n        //   this.formating(Date.now() - Date.parse(this.data.updated), false) +\r\n        //   \" : \" +\r\n        //   this.data.lastChapter\r\n      });\r\n    },\r\n\r\n    deleteBookFn() {\r\n      this.$store.commit(\"deleteBook\", this.$route.query.id);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.shuxinxi {\r\n  width: 100%;\r\n  padding: 15px;\r\n  position: relative;\r\n  .shuxinxi_wrapper {\r\n    width: 100%;\r\n    &::after {\r\n      content: \"\";\r\n      display: block;\r\n      clear: both;\r\n    }\r\n    .left {\r\n      float: left;\r\n      width: 1.73333rem;\r\n      height: 2.33333rem;\r\n      margin-right: 10px;\r\n      img {\r\n        width: 100%;\r\n        height: 100%;\r\n      }\r\n    }\r\n    .right {\r\n      text-align: left;\r\n      float: left;\r\n      h4 {\r\n        margin: 0;\r\n        padding: 0;\r\n        font-size: 16px;\r\n      }\r\n\r\n      & > div {\r\n        margin: 2px 0;\r\n\r\n        span:nth-child(1) {\r\n          color: #b93321;\r\n        }\r\n\r\n        & > span {\r\n          margin: 0 5px;\r\n          font-size: 12px;\r\n          color: #999;\r\n        }\r\n      }\r\n\r\n      & > span {\r\n        font-size: 12px;\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// btn\r\n.anniu {\r\n  width: 100%;\r\n  padding: 15px;\r\n  padding-top: 0;\r\n  border-bottom: 1px solid #ebebeb;\r\n  .btn-wrapper {\r\n    width: 100%;\r\n    margin: 0 auto;\r\n    overflow: hidden;\r\n    div {\r\n      width: 45%;\r\n      height: 1.17333rem;\r\n      line-height: 1.17333rem;\r\n    }\r\n    div.left {\r\n      float: left;\r\n      border: 1px solid #b93321;\r\n      color: #b93321;\r\n    }\r\n    div.left.delete {\r\n      background-color: #999;\r\n      color: #fff;\r\n      border: none;\r\n    }\r\n    div.right {\r\n      float: right;\r\n      color: white;\r\n      background-color: #b93321;\r\n    }\r\n  }\r\n}\r\n\r\n// 人气\r\n.renqi {\r\n  width: 100%;\r\n  padding: 15px 0;\r\n  border-bottom: 1px solid #ebebeb;\r\n  .item {\r\n    width: 33%;\r\n    display: inline-block;\r\n    p {\r\n      color: #999;\r\n      font-size: 12px;\r\n      margin: 0;\r\n      padding: 0;\r\n      margin-bottom: 5px;\r\n    }\r\n    span {\r\n      color: black;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n\r\n// juqing\r\n.juqing {\r\n  width: 100%;\r\n  padding: 0.53333rem;\r\n  position: relative;\r\n  text-align: left;\r\n  .text {\r\n    font-size: 13px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n    // display: -webkit-box;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 3;\r\n    transition: all 0.3s;\r\n  }\r\n  .jiantou {\r\n    width: 0.53333rem;\r\n    height: 0.53333rem;\r\n    position: absolute;\r\n    right: 10px;\r\n    bottom: 15px;\r\n    background-image: url(../assets/xialalist.png);\r\n    background-size: 60% 60%;\r\n    background-position: center center;\r\n    background-repeat: no-repeat;\r\n  }\r\n  &.active {\r\n    .jiantou {\r\n      transform: rotate(180deg);\r\n    }\r\n    .text {\r\n      // display: block;\r\n      -webkit-line-clamp: none;\r\n    }\r\n  }\r\n}\r\n\r\n// 目录\r\n.mulu {\r\n  width: 100%;\r\n  padding-left: 15px;\r\n  border-bottom: 1px solid #ebebeb;\r\n  .mulu-box {\r\n    width: 100%;\r\n    padding: 15px 0;\r\n    border-top: 1px solid #ebebeb;\r\n    text-align: left;\r\n    .right {\r\n      width: 65%;\r\n      float: right;\r\n      margin-right: 9px;\r\n      position: relative;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      color: #999;\r\n      &::after {\r\n        content: \"\";\r\n        position: absolute;\r\n        right: 0px;\r\n        width: 0.53333rem;\r\n        height: 0.53333rem;\r\n        background-image: url(../assets/xialalist.png);\r\n        background-size: 60% 60%;\r\n        background-position: center;\r\n        background-repeat: no-repeat;\r\n        transform: rotate(270deg);\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 热门书评\r\n.remenshupin {\r\n  width: 100%;\r\n  padding: 15px;\r\n  text-align: left;\r\n  .pinlun {\r\n    width: 100%;\r\n    .title {\r\n      font-size: 16px;\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}