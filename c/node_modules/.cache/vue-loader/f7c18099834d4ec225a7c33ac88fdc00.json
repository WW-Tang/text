{"remainingRequest":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\components\\HomeSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\components\\HomeSearch.vue","mtime":1578568708000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgVnVlIGZyb20gInZ1ZSI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOeDremXqOaQnOe0ouaVsOaNrg0KICAgICAgaG90V29yZHM6IFtdLA0KDQogICAgICBzZWFyY2hJbmRleDogMCwNCiAgICAgIHNwZWVkOiAyNywNCiAgICAgIC8vIOS9v+eUqOihjOWGheagt+W8j+aOp+WItg0KICAgICAgaXNUcmFuc2l0aW9uU3RyOiAiYWxsIDFzIiwNCiAgICAgIC8vIOS9v+eUqOexu+WQjeaOp+WItg0KICAgICAgaXNUcmFuc2l0aW9uOiB0cnVlLA0KICAgICAgc2hhbmh1aTogbnVsbCwNCiAgICAgIGlkOiBudWxsLA0KICAgICAgdGV4dDogInRleHQiDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBzZWFyY2hWYWx1ZTogZnVuY3Rpb24oKSB7DQogICAgICByZXR1cm4gdGhpcy5ob3RXb3Jkc1t0aGlzLnNlYXJjaEluZGV4XTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyAgIOaQnOe0ouaMiemSruiiq+eCueWHuyDot7PovazliLAg5pCc57Si57uT5p6cDQogICAgc2VhcmNoQnRuQ2xpY2tGbigpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDogIi9TZWFyY2hMaXN0IiwNCiAgICAgICAgcXVlcnk6IHsNCiAgICAgICAgICB2YWx1ZTogdGhpcy5zZWFyY2hWYWx1ZQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIGlucHV06KKr54K55Ye76L+b5YWl5pCc57Si55WM6Z2iDQogICAgc2VhcmNoQ2xpY2tGbigpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDogIi9TZWFyY2giDQogICAgICB9KTsNCiAgICB9LA0KICAgIGF1dG9wbGF5OiBmdW5jdGlvbigpIHsNCiAgICAgIC8vIOWPquacieacgOWQjuS4gOW8oOeahOWBh+WwvuW3tOWPr+S7pemXquWbnu+8jOacgOWQjuS4gOW8oOeahOe0ouW8leWAvChsZW5ndGggLSAxKeaJjeS8muWkp+S6jiBsZW5naHQtIDINCiAgICAgIGlmICh0aGlzLnNlYXJjaEluZGV4ID4gdGhpcy5ob3RXb3Jkcy5sZW5ndGggLSAyKSB7DQogICAgICAgIC8vIOS4jeinpuWPkei/h+a4oeaViOaenOS4i++8jOabtOaWsGRvbeeahOS9jee9ruWbnuWIsOi1t+eCuQ0KICAgICAgICAvLyB0aGlzLmlzVHJhbnNpdGlvbiA9IGZhbHNlOw0KICAgICAgICB0aGlzLmlzVHJhbnNpdGlvblN0ciA9ICJub25lIjsNCiAgICAgICAgLy8g5byA5ZCv6Zeq5ZueDQogICAgICAgIHRoaXMuc2hhbmh1aSA9ICIwIjsNCiAgICAgICAgLy8g6Zeq5ZCO6KaB5Y6755qE5L2N572uDQogICAgICAgIHRoaXMuc2VhcmNoSW5kZXggPSAwOw0KICAgICAgICAvLyDmuIXpmaTlrprml7blmagNCiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5pZCk7DQogICAgICAgIC8vIOW8guatpeWPr+S7peS9v+mHjOmdouabtOaWsOinhuWbvueLrOeri+WHuuadpeaIkOS4uuS4gOW4pyzlvILmraXpl6rlm54NCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgLy8g5oGi5aSN6L+H5rih5pWI5p6cDQogICAgICAgICAgLy8gdGhpcy5pc1RyYW5zaXRpb24gPSB0cnVlOw0KICAgICAgICAgIHRoaXMuaXNUcmFuc2l0aW9uU3RyID0gImFsbCAxcyI7DQogICAgICAgICAgLy8g5YWz6Zet6Zeq5ZueDQogICAgICAgICAgdGhpcy5zaGFuaHVpID0gbnVsbDsNCiAgICAgICAgICAvLyDmm7TmlrDop4blm74NCiAgICAgICAgICB0aGlzLnNlYXJjaEluZGV4Kys7DQogICAgICAgICAgLy8gdGhpcy5hdXRvcGxheSgpOw0KICAgICAgICAgIHRoaXMuaWQgPSBzZXRJbnRlcnZhbCh0aGlzLmF1dG9wbGF5LmJpbmQodGhpcyksIDMwMDApOw0KICAgICAgICB9KTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5Y+q5pyJ5rua5Yqo5Yiw5ZCO5LiA5Liq5Zu+54mH5omN6ZyA6KaB6Zeq5Zue77yM5YW25LuW57Si5byV5LiL5YWz6ZetDQogICAgICAgIHRoaXMuc2hhbmh1aSA9IG51bGw7DQogICAgICB9DQoNCiAgICAgIHRoaXMuc2VhcmNoSW5kZXgrKzsNCiAgICB9DQogIH0sDQogIGJlZm9yZUNyZWF0ZSgpIHsNCiAgICAvLyDor7fmsYLng63pl6jmkJzntKLlhbPplK7lrZcNCiAgICB0aGlzLmF4aW9zLmdldCgiaHR0cDovL25vdmVsLmtlbGU4LmNuL2hvdC1ib29rcyIpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgLy8g5oiq5Y+W5Y+W5YWt5Liq5pWw5o2uDQogICAgICB0aGlzLmhvdFdvcmRzID0gcmVzcG9uc2UuZGF0YS5ob3RXb3Jkcy5zbGljZSgwLCA2KTsNCiAgICAgIHRoaXMuaG90V29yZHMucHVzaCh0aGlzLmhvdFdvcmRzWzBdKTsNCiAgICB9KTsNCiAgfSwNCiAgLy8gYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgew0KICAvLyAgIFZ1ZS5heGlvcy5nZXQoImh0dHA6Ly9ub3ZlbC5rZWxlOC5jbi9ob3QtYm9va3MiKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgLy8gICAgIG5leHQodm0gPT4gew0KICAvLyAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5ob3RXb3Jkcyk7DQogIC8vICAgICAgIHZtLmhvdFdvcmRzID0gcmVzcG9uc2UuZGF0YS5ob3RXb3Jkcy5zbGljZSgwLCA2KTsNCiAgLy8gICAgIH0pOw0KICAvLyAgIH0pOw0KICAvLyB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuaWQgPSBzZXRJbnRlcnZhbCh0aGlzLmF1dG9wbGF5LmJpbmQodGhpcyksIDMwMDApOw0KICB9DQp9Ow0K"},{"version":3,"sources":["HomeSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HomeSearch.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"search\">\r\n    <div class=\"search-box\">\r\n      <div class=\"content\" @click.stop=\"searchClickFn\">\r\n        <div\r\n          :class=\"[text]\"\r\n          :style=\"{transform: 'translateY(-'+(shanhui? shanhui : searchIndex*speed)+'px)',transition:isTransitionStr}\"\r\n        >\r\n          <!-- , {tran:isTransition} -->\r\n          <!--  -->\r\n          <p v-for=\"(item, index) in hotWords\" :key=\"index\">{{item}}</p>\r\n        </div>\r\n        <div class=\"search-btn\" @click.stop=\"searchBtnClickFn\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n// import Vue from \"vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 热门搜索数据\r\n      hotWords: [],\r\n\r\n      searchIndex: 0,\r\n      speed: 27,\r\n      // 使用行内样式控制\r\n      isTransitionStr: \"all 1s\",\r\n      // 使用类名控制\r\n      isTransition: true,\r\n      shanhui: null,\r\n      id: null,\r\n      text: \"text\"\r\n    };\r\n  },\r\n  computed: {\r\n    searchValue: function() {\r\n      return this.hotWords[this.searchIndex];\r\n    }\r\n  },\r\n  methods: {\r\n    //   搜索按钮被点击 跳转到 搜索结果\r\n    searchBtnClickFn() {\r\n      this.$router.push({\r\n        path: \"/SearchList\",\r\n        query: {\r\n          value: this.searchValue\r\n        }\r\n      });\r\n    },\r\n    // input被点击进入搜索界面\r\n    searchClickFn() {\r\n      this.$router.push({\r\n        path: \"/Search\"\r\n      });\r\n    },\r\n    autoplay: function() {\r\n      // 只有最后一张的假尾巴可以闪回，最后一张的索引值(length - 1)才会大于 lenght- 2\r\n      if (this.searchIndex > this.hotWords.length - 2) {\r\n        // 不触发过渡效果下，更新dom的位置回到起点\r\n        // this.isTransition = false;\r\n        this.isTransitionStr = \"none\";\r\n        // 开启闪回\r\n        this.shanhui = \"0\";\r\n        // 闪后要去的位置\r\n        this.searchIndex = 0;\r\n        // 清除定时器\r\n        window.clearInterval(this.id);\r\n        // 异步可以使里面更新视图独立出来成为一帧,异步闪回\r\n        setTimeout(() => {\r\n          // 恢复过渡效果\r\n          // this.isTransition = true;\r\n          this.isTransitionStr = \"all 1s\";\r\n          // 关闭闪回\r\n          this.shanhui = null;\r\n          // 更新视图\r\n          this.searchIndex++;\r\n          // this.autoplay();\r\n          this.id = setInterval(this.autoplay.bind(this), 3000);\r\n        });\r\n        return;\r\n      } else {\r\n        // 只有滚动到后一个图片才需要闪回，其他索引下关闭\r\n        this.shanhui = null;\r\n      }\r\n\r\n      this.searchIndex++;\r\n    }\r\n  },\r\n  beforeCreate() {\r\n    // 请求热门搜索关键字\r\n    this.axios.get(\"http://novel.kele8.cn/hot-books\").then(response => {\r\n      // 截取取六个数据\r\n      this.hotWords = response.data.hotWords.slice(0, 6);\r\n      this.hotWords.push(this.hotWords[0]);\r\n    });\r\n  },\r\n  // beforeRouteEnter(to, from, next) {\r\n  //   Vue.axios.get(\"http://novel.kele8.cn/hot-books\").then(response => {\r\n  //     next(vm => {\r\n  //       window.console.log(response.data.hotWords);\r\n  //       vm.hotWords = response.data.hotWords.slice(0, 6);\r\n  //     });\r\n  //   });\r\n  // },\r\n  created() {\r\n    this.id = setInterval(this.autoplay.bind(this), 3000);\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.search {\r\n  width: 100%;\r\n  height: 34px;\r\n  padding: 3px 6px;\r\n  background-color: white;\r\n  .search-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #e9e9e9;\r\n    border-radius: 5px;\r\n    padding: 5px 10px;\r\n    .content {\r\n      width: 100%;\r\n      height: 100%;\r\n      overflow: hidden;\r\n      position: relative;\r\n      display: flex;\r\n      .text {\r\n        flex: 1;\r\n        height: 100%;\r\n        // 这里要加CSS3自定义动画, CSS3自定义动画无法实现 无过渡效果下 从最后一张闪回第一张\r\n        // animation: mylunbo 10s ease 0.5s infinite;\r\n        // transition: all 0.3s;\r\n        transform: translateY(0px);\r\n        &.tran {\r\n          transition: all 0.3s;\r\n        }\r\n        p {\r\n          text-align: left;\r\n          font-size: 0.32rem;\r\n          color: #999;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          // margin: 15px 0;\r\n        }\r\n      }\r\n      .search-btn {\r\n        width: 0.66667rem;\r\n        height: 0.66667rem;\r\n        background-image: url(../assets/search.png);\r\n        background-repeat: no-repeat;\r\n        background-size: 100% 100%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}