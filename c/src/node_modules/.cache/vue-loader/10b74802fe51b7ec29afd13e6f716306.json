{"remainingRequest":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\components\\HomeSearch.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\components\\HomeSearch.vue","mtime":1584178788000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouc2VhcmNoIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMzRweDsNCiAgcGFkZGluZzogM3B4IDZweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogIC8vIHBvc2l0aW9uOiBmaXhlZDsNCiAgLy8gdG9wOiA0MnB4Ow0KICAvLyB6LWluZGV4OiA5OTsNCiAgLnNlYXJjaC1ib3ggew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTllOWU5Ow0KICAgIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgICBwYWRkaW5nOiA1cHggMTBweDsNCiAgICAuY29udGVudCB7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgLnRleHQgew0KICAgICAgICBmbGV4OiAxOw0KICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgIC8vIOi/memHjOimgeWKoENTUzPoh6rlrprkuYnliqjnlLssIENTUzPoh6rlrprkuYnliqjnlLvml6Dms5Xlrp7njrAg5peg6L+H5rih5pWI5p6c5LiLIOS7juacgOWQjuS4gOW8oOmXquWbnuesrOS4gOW8oA0KICAgICAgICAvLyBhbmltYXRpb246IG15bHVuYm8gMTBzIGVhc2UgMC41cyBpbmZpbml0ZTsNCiAgICAgICAgLy8gdHJhbnNpdGlvbjogYWxsIDAuM3M7DQogICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwcHgpOw0KICAgICAgICAmLnRyYW4gew0KICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjNzOw0KICAgICAgICB9DQogICAgICAgIHAgew0KICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAgICAgZm9udC1zaXplOiAwLjMycmVtOw0KICAgICAgICAgIGNvbG9yOiAjOTk5Ow0KICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQogICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgICAvLyBtYXJnaW46IDE1cHggMDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLnNlYXJjaC1idG4gew0KICAgICAgICB3aWR0aDogMC42NjY2N3JlbTsNCiAgICAgICAgaGVpZ2h0OiAwLjY2NjY3cmVtOw0KICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vYXNzZXRzL3NlYXJjaC5wbmcpOw0KICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["HomeSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HomeSearch.vue","sourceRoot":"components","sourcesContent":["<template>\r\n  <div class=\"search\">\r\n    <div class=\"search-box\">\r\n      <div class=\"content\" @click.stop=\"searchClickFn\">\r\n        <div\r\n          :class=\"[text]\"\r\n          :style=\"{transform: 'translateY(-'+(shanhui? shanhui : searchIndex*speed)+'px)',transition:isTransitionStr}\"\r\n        >\r\n          <!-- , {tran:isTransition} -->\r\n          <!--  -->\r\n          <p v-for=\"(item, index) in hotWords\" :key=\"index\">{{item}}</p>\r\n        </div>\r\n        <div class=\"search-btn\" @click.stop=\"searchBtnClickFn\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n// import Vue from \"vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 热门搜索数据\r\n      hotWords: [],\r\n\r\n      searchIndex: 0,\r\n      speed: 27,\r\n      // 使用行内样式控制\r\n      isTransitionStr: \"all 1s\",\r\n      // 使用类名控制\r\n      isTransition: true,\r\n      shanhui: null,\r\n      id: null,\r\n      text: \"text\"\r\n    };\r\n  },\r\n  computed: {\r\n    searchValue: function() {\r\n      return this.hotWords[this.searchIndex];\r\n    }\r\n  },\r\n  methods: {\r\n    //   搜索按钮被点击 跳转到 搜索结果\r\n    searchBtnClickFn() {\r\n      this.$router.push({\r\n        path: \"/SearchList\",\r\n        query: {\r\n          value: this.searchValue\r\n        }\r\n      });\r\n    },\r\n    // input被点击进入搜索界面\r\n    searchClickFn() {\r\n      this.$router.push({\r\n        path: \"/Search\"\r\n      });\r\n    },\r\n    autoplay: function() {\r\n      // 只有最后一张的假尾巴可以闪回，最后一张的索引值(length - 1)才会大于 lenght- 2\r\n      if (this.searchIndex > this.hotWords.length - 2) {\r\n        // 不触发过渡效果下，更新dom的位置回到起点\r\n        // this.isTransition = false;\r\n        this.isTransitionStr = \"none\";\r\n        // 开启闪回\r\n        this.shanhui = \"0\";\r\n        // 闪后要去的位置\r\n        this.searchIndex = 0;\r\n        // 清除定时器\r\n        window.clearInterval(this.id);\r\n        // 异步可以使里面更新视图独立出来成为一帧,异步闪回\r\n        setTimeout(() => {\r\n          // 恢复过渡效果\r\n          // this.isTransition = true;\r\n          this.isTransitionStr = \"all 1s\";\r\n          // 关闭闪回\r\n          this.shanhui = null;\r\n          // 更新视图\r\n          this.searchIndex++;\r\n          // this.autoplay();\r\n          this.id = setInterval(this.autoplay.bind(this), 3000);\r\n        });\r\n        return;\r\n      } else {\r\n        // 只有滚动到后一个图片才需要闪回，其他索引下关闭\r\n        this.shanhui = null;\r\n      }\r\n\r\n      this.searchIndex++;\r\n    }\r\n  },\r\n  beforeCreate() {\r\n    // 请求热门搜索关键字\r\n    this.axios.get(\"http://novel.kele8.cn/hot-books\").then(response => {\r\n      // 截取取六个数据\r\n      this.hotWords = response.data.hotWords.slice(0, 6);\r\n      this.hotWords.push(this.hotWords[0]);\r\n    });\r\n  },\r\n  // beforeRouteEnter(to, from, next) {\r\n  //   Vue.axios.get(\"http://novel.kele8.cn/hot-books\").then(response => {\r\n  //     next(vm => {\r\n  //       window.console.log(response.data.hotWords);\r\n  //       vm.hotWords = response.data.hotWords.slice(0, 6);\r\n  //     });\r\n  //   });\r\n  // },\r\n  created() {\r\n    this.id = setInterval(this.autoplay.bind(this), 3000);\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.search {\r\n  width: 100%;\r\n  height: 34px;\r\n  padding: 3px 6px;\r\n  background-color: white;\r\n  // position: fixed;\r\n  // top: 42px;\r\n  // z-index: 99;\r\n  .search-box {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #e9e9e9;\r\n    border-radius: 5px;\r\n    padding: 5px 10px;\r\n    .content {\r\n      width: 100%;\r\n      height: 100%;\r\n      overflow: hidden;\r\n      position: relative;\r\n      display: flex;\r\n      .text {\r\n        flex: 1;\r\n        height: 100%;\r\n        // 这里要加CSS3自定义动画, CSS3自定义动画无法实现 无过渡效果下 从最后一张闪回第一张\r\n        // animation: mylunbo 10s ease 0.5s infinite;\r\n        // transition: all 0.3s;\r\n        transform: translateY(0px);\r\n        &.tran {\r\n          transition: all 0.3s;\r\n        }\r\n        p {\r\n          text-align: left;\r\n          font-size: 0.32rem;\r\n          color: #999;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          // margin: 15px 0;\r\n        }\r\n      }\r\n      .search-btn {\r\n        width: 0.66667rem;\r\n        height: 0.66667rem;\r\n        background-image: url(../assets/search.png);\r\n        background-repeat: no-repeat;\r\n        background-size: 100% 100%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}