{"remainingRequest":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\yuedubook.vue?vue&type=script&lang=js&","dependencies":[{"path":"h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\yuedubook.vue","mtime":1583327836000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gInZ1ZSI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRpdGxlOiAiIiwNCiAgICAgIGNwQ29udGVudDogIiIsDQogICAgICB6aGFuZ2ppZWxpc3Q6IG51bGwsDQoNCiAgICAgIGluZGV4OiAwLA0KICAgICAgbGlzdDogW3t9XSwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uTG9hZCgpIHsNCiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygNCiAgICAgICAgIuW8gOWni+S4iuaLieivt+axguaVsOaNriIgKw0KICAgICAgICAgICJodHRwOi8vbm92ZWwua2VsZTguY24vY2hhcHRlcnMvIiArDQogICAgICAgICAgdGhpcy5mb3JtYXRpbmcodGhpcy56aGFuZ2ppZWxpc3RbdGhpcy5pbmRleF0ubGluaykNCiAgICAgICk7DQogICAgICBWdWUuYXhpb3MoDQogICAgICAgICJodHRwOi8vbm92ZWwua2VsZTguY24vY2hhcHRlcnMvIiArDQogICAgICAgICAgdGhpcy5mb3JtYXRpbmcodGhpcy56aGFuZ2ppZWxpc3RbdGhpcy5pbmRleF0ubGluaykNCiAgICAgICkudGhlbihyZXMgPT4gew0KICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHRoaXMuaW5kZXgpOw0KICAgICAgICB2YXIgb2JqID0gew0KICAgICAgICAgIHRpdGxlOiByZXMuZGF0YS5jaGFwdGVyLnRpdGxlLA0KICAgICAgICAgIGNwQ29udGVudDogcmVzLmRhdGEuY2hhcHRlci5jcENvbnRlbnQuc3BsaXQoIlxuIikNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5saXN0W3RoaXMuaW5kZXhdID0gb2JqOw0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5pbmRleCsrOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBmb3JtYXRpbmcoc3RyKSB7DQogICAgICAvLyA6IC8gPyA9DQogICAgICB2YXIgYXJyID0gc3RyLnNwbGl0KCIiKTsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmIChhcnJbaV0gPT09ICI6Iikgew0KICAgICAgICAgIGFycltpXSA9ICIlM0EiOw0KICAgICAgICB9DQogICAgICAgIGlmIChhcnJbaV0gPT09ICIvIikgew0KICAgICAgICAgIGFycltpXSA9ICIlMkYiOw0KICAgICAgICB9DQogICAgICAgIGlmIChhcnJbaV0gPT09ICI/Iikgew0KICAgICAgICAgIGFycltpXSA9ICIlM0YiOw0KICAgICAgICB9DQogICAgICAgIGlmIChhcnJbaV0gPT09ICI9Iikgew0KICAgICAgICAgIGFycltpXSA9ICIlM0QiOw0KICAgICAgICB9DQogICAgICB9DQogICAgICB2YXIgbmV3U3RyID0gYXJyLmpvaW4oIiIpOw0KICAgICAgd2luZG93LmNvbnNvbGUubG9nKG5ld1N0cik7DQogICAgICByZXR1cm4gbmV3U3RyOw0KICAgIH0NCiAgfSwNCiAgYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgew0KICAgIHdpbmRvdy5jb25zb2xlLmxvZygi6ZiF6K+75Yy6Iik7DQogICAgLy8gdG/lkoxmcm9t6YO95YKo5a2Y55qE5piv6Lev55Sx55qEJHJvdXRl5a+56LGhDQogICAgLy8gdG/mmK/mjIfooqvorr/pl67nmoTot6/nlLHvvIzkuZ/lsLHmmK/lvZPliY3ot6/nlLENCiAgICAvLyBmcm9t5oyH55qE5piv5LuO5ZOq5Liq6Lev55Sx6Lez6L+H5p2l55qE77yM5LiK5LiA5Liq6Lev55SxDQogICAgd2luZG93LmNvbnNvbGUubG9nKHRvLnF1ZXJ5LmlkKTsNCiAgICAvLyDnrKzkuIDor7fmsYLkuabmupBpZA0KICAgIHdpbmRvdy5jb25zb2xlLmxvZygNCiAgICAgICLnrKzkuIDmrKHor7fmsYLkuabmupDvvJoiICsNCiAgICAgICAgImh0dHA6Ly9ub3ZlbC5rZWxlOC5jbi9ib29rLXNvdXJjZXM/dmlldz1zdW1tYXJ5JmJvb2s9IiArDQogICAgICAgIHRvLnF1ZXJ5LmlkDQogICAgKTsNCiAgICBWdWUuYXhpb3MoDQogICAgICAiaHR0cDovL25vdmVsLmtlbGU4LmNuL2Jvb2stc291cmNlcz92aWV3PXN1bW1hcnkmYm9vaz0iICsgdG8ucXVlcnkuaWQNCiAgICApDQogICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICB3aW5kb3cuY29uc29sZS5sb2cocmVzLmRhdGFbMF0uX2lkKTsNCiAgICAgICAgLy8g56ys5LqM5qyh6K+35rGC56ug6IqC5YiX6KGo77yM5b6X5Yiw5ZCE5Liq56ug6IqC55qEbGluaw0KICAgICAgICB3aW5kb3cuY29uc29sZS5sb2coDQogICAgICAgICAgIuesrOS6jOasoeivt+axgueroOiKguWIl+ihqO+8miIgKw0KICAgICAgICAgICAgImh0dHA6Ly9ub3ZlbC5rZWxlOC5jbi9ib29rLWNoYXB0ZXJzLyIgKw0KICAgICAgICAgICAgcmVzLmRhdGFbMF0uX2lkDQogICAgICAgICk7DQogICAgICAgIFZ1ZS5heGlvcygNCiAgICAgICAgICAiaHR0cDovL25vdmVsLmtlbGU4LmNuL2Jvb2stY2hhcHRlcnMvIiArIHJlcy5kYXRhWzBdLl9pZA0KICAgICAgICApLnRoZW4ocmVzMiA9PiB7DQogICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHJlczIuZGF0YS5jaGFwdGVyc1swXSk7DQogICAgICAgICAgbmV4dCh2bSA9PiB7DQogICAgICAgICAgICAvLyDnrKzkuInmrKHor7fmsYLnq6DoioLlhoXlrrnkuI7moIfpopgNCiAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygNCiAgICAgICAgICAgICAgIuesrOS4ieasoeivt+axgueroOiKguWGheWuue+8miIgKw0KICAgICAgICAgICAgICAgICJodHRwOi8vbm92ZWwua2VsZTguY24vY2hhcHRlcnMvIiArDQogICAgICAgICAgICAgICAgdm0uZm9ybWF0aW5nKHJlczIuZGF0YS5jaGFwdGVyc1swXS5saW5rKQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIFZ1ZS5heGlvcygNCiAgICAgICAgICAgICAgImh0dHA6Ly9ub3ZlbC5rZWxlOC5jbi9jaGFwdGVycy8iICsNCiAgICAgICAgICAgICAgICB2bS5mb3JtYXRpbmcocmVzMi5kYXRhLmNoYXB0ZXJzWzBdLmxpbmspDQogICAgICAgICAgICApLnRoZW4ocmVzMyA9PiB7DQogICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMzKTsNCg0KICAgICAgICAgICAgICB2bS56aGFuZ2ppZWxpc3QgPSByZXMyLmRhdGEuY2hhcHRlcnM7DQoNCiAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKHZtLmxpc3QpOw0KICAgICAgICAgICAgICB2YXIgb2JqID0gew0KICAgICAgICAgICAgICAgIHRpdGxlOiByZXMzLmRhdGEuY2hhcHRlci50aXRsZSwNCiAgICAgICAgICAgICAgICBjcENvbnRlbnQ6IHJlczMuZGF0YS5jaGFwdGVyLmNwQ29udGVudC5zcGxpdCgiXG4iKQ0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICB2bS5saXN0W3ZtLmluZGV4XSA9IG9iajsNCiAgICAgICAgICAgICAgdm0ubG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICB2bS5pbmRleCsrOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgpOw0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHdpbmRvdy5jb25zb2xlLmxvZygi6ZiF6K+757uE5Lu25bey5Yib5bu6Iik7DQogIH0NCn07DQo="},{"version":3,"sources":["yuedubook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"yuedubook.vue","sourceRoot":"views","sourcesContent":["<template>\r\n  <div class=\"yuedubook\">\r\n\r\n    <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n      <van-cell v-for=\"(item, index) in list\" :key=\"index\" :title=\"item\">\r\n        <h2>{{item.title}}</h2>\r\n        <div class=\"yuedubook-box\">\r\n          <p v-for=\"(content, index) in item.cpContent\" :key=\"index\">{{content}}</p>\r\n        </div>\r\n      </van-cell>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: \"\",\r\n      cpContent: \"\",\r\n      zhangjielist: null,\r\n\r\n      index: 0,\r\n      list: [{}],\r\n      loading: false,\r\n      finished: false\r\n    };\r\n  },\r\n  methods: {\r\n    onLoad() {\r\n      window.console.log(\r\n        \"开始上拉请求数据\" +\r\n          \"http://novel.kele8.cn/chapters/\" +\r\n          this.formating(this.zhangjielist[this.index].link)\r\n      );\r\n      Vue.axios(\r\n        \"http://novel.kele8.cn/chapters/\" +\r\n          this.formating(this.zhangjielist[this.index].link)\r\n      ).then(res => {\r\n        window.console.log(res);\r\n        window.console.log(this.index);\r\n        var obj = {\r\n          title: res.data.chapter.title,\r\n          cpContent: res.data.chapter.cpContent.split(\"\\n\")\r\n        };\r\n        this.list[this.index] = obj;\r\n        this.loading = false;\r\n        this.index++;\r\n      });\r\n    },\r\n    formating(str) {\r\n      // : / ? =\r\n      var arr = str.split(\"\");\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i] === \":\") {\r\n          arr[i] = \"%3A\";\r\n        }\r\n        if (arr[i] === \"/\") {\r\n          arr[i] = \"%2F\";\r\n        }\r\n        if (arr[i] === \"?\") {\r\n          arr[i] = \"%3F\";\r\n        }\r\n        if (arr[i] === \"=\") {\r\n          arr[i] = \"%3D\";\r\n        }\r\n      }\r\n      var newStr = arr.join(\"\");\r\n      window.console.log(newStr);\r\n      return newStr;\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    window.console.log(\"阅读区\");\r\n    // to和from都储存的是路由的$route对象\r\n    // to是指被访问的路由，也就是当前路由\r\n    // from指的是从哪个路由跳过来的，上一个路由\r\n    window.console.log(to.query.id);\r\n    // 第一请求书源id\r\n    window.console.log(\r\n      \"第一次请求书源：\" +\r\n        \"http://novel.kele8.cn/book-sources?view=summary&book=\" +\r\n        to.query.id\r\n    );\r\n    Vue.axios(\r\n      \"http://novel.kele8.cn/book-sources?view=summary&book=\" + to.query.id\r\n    )\r\n      .then(res => {\r\n        window.console.log(res.data[0]._id);\r\n        // 第二次请求章节列表，得到各个章节的link\r\n        window.console.log(\r\n          \"第二次请求章节列表：\" +\r\n            \"http://novel.kele8.cn/book-chapters/\" +\r\n            res.data[0]._id\r\n        );\r\n        Vue.axios(\r\n          \"http://novel.kele8.cn/book-chapters/\" + res.data[0]._id\r\n        ).then(res2 => {\r\n          window.console.log(res2.data.chapters[0]);\r\n          next(vm => {\r\n            // 第三次请求章节内容与标题\r\n            window.console.log(\r\n              \"第三次请求章节内容：\" +\r\n                \"http://novel.kele8.cn/chapters/\" +\r\n                vm.formating(res2.data.chapters[0].link)\r\n            );\r\n            Vue.axios(\r\n              \"http://novel.kele8.cn/chapters/\" +\r\n                vm.formating(res2.data.chapters[0].link)\r\n            ).then(res3 => {\r\n              window.console.log(res3);\r\n\r\n              vm.zhangjielist = res2.data.chapters;\r\n\r\n              window.console.log(vm.list);\r\n              var obj = {\r\n                title: res3.data.chapter.title,\r\n                cpContent: res3.data.chapter.cpContent.split(\"\\n\")\r\n              };\r\n              vm.list[vm.index] = obj;\r\n              vm.loading = false;\r\n              vm.index++;\r\n            });\r\n          });\r\n        });\r\n      })\r\n      .catch();\r\n  },\r\n  created() {\r\n    window.console.log(\"阅读组件已创建\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less' spcode>\r\n.yuedubook {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #eee6dd;\r\n\r\n  padding-top: 0.66667rem;\r\n  text-align: left;\r\n  h2 {\r\n    margin: 0px;\r\n    color: #333;\r\n    padding: 0 0.53333rem;\r\n    line-height: 1.5;\r\n\r\n    font-size: 24px;\r\n  }\r\n\r\n  .yuedubook-box {\r\n    color: #333;\r\n    padding: 0.26667rem 0.53333rem 0;\r\n\r\n    p {\r\n      font-size: 20px;\r\n      color: #5c5d58;\r\n      // text-indent: 2em;\r\n      text-indent: 1cm;\r\n\r\n      line-height: 1.5;\r\n      margin: 0.3333rem 0;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}