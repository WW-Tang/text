{"remainingRequest":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\yuedubook.vue?vue&type=style&index=0&lang=less&spcode=true&","dependencies":[{"path":"h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\yuedubook.vue","mtime":1583327836000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"h:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoueXVlZHVib29rIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTZkZDsNCg0KICBwYWRkaW5nLXRvcDogMC42NjY2N3JlbTsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCiAgaDIgew0KICAgIG1hcmdpbjogMHB4Ow0KICAgIGNvbG9yOiAjMzMzOw0KICAgIHBhZGRpbmc6IDAgMC41MzMzM3JlbTsNCiAgICBsaW5lLWhlaWdodDogMS41Ow0KDQogICAgZm9udC1zaXplOiAyNHB4Ow0KICB9DQoNCiAgLnl1ZWR1Ym9vay1ib3ggew0KICAgIGNvbG9yOiAjMzMzOw0KICAgIHBhZGRpbmc6IDAuMjY2NjdyZW0gMC41MzMzM3JlbSAwOw0KDQogICAgcCB7DQogICAgICBmb250LXNpemU6IDIwcHg7DQogICAgICBjb2xvcjogIzVjNWQ1ODsNCiAgICAgIC8vIHRleHQtaW5kZW50OiAyZW07DQogICAgICB0ZXh0LWluZGVudDogMWNtOw0KDQogICAgICBsaW5lLWhlaWdodDogMS41Ow0KICAgICAgbWFyZ2luOiAwLjMzMzNyZW0gMDsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["yuedubook.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"yuedubook.vue","sourceRoot":"views","sourcesContent":["<template>\r\n  <div class=\"yuedubook\">\r\n\r\n    <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n      <van-cell v-for=\"(item, index) in list\" :key=\"index\" :title=\"item\">\r\n        <h2>{{item.title}}</h2>\r\n        <div class=\"yuedubook-box\">\r\n          <p v-for=\"(content, index) in item.cpContent\" :key=\"index\">{{content}}</p>\r\n        </div>\r\n      </van-cell>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: \"\",\r\n      cpContent: \"\",\r\n      zhangjielist: null,\r\n\r\n      index: 0,\r\n      list: [{}],\r\n      loading: false,\r\n      finished: false\r\n    };\r\n  },\r\n  methods: {\r\n    onLoad() {\r\n      window.console.log(\r\n        \"开始上拉请求数据\" +\r\n          \"http://novel.kele8.cn/chapters/\" +\r\n          this.formating(this.zhangjielist[this.index].link)\r\n      );\r\n      Vue.axios(\r\n        \"http://novel.kele8.cn/chapters/\" +\r\n          this.formating(this.zhangjielist[this.index].link)\r\n      ).then(res => {\r\n        window.console.log(res);\r\n        window.console.log(this.index);\r\n        var obj = {\r\n          title: res.data.chapter.title,\r\n          cpContent: res.data.chapter.cpContent.split(\"\\n\")\r\n        };\r\n        this.list[this.index] = obj;\r\n        this.loading = false;\r\n        this.index++;\r\n      });\r\n    },\r\n    formating(str) {\r\n      // : / ? =\r\n      var arr = str.split(\"\");\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i] === \":\") {\r\n          arr[i] = \"%3A\";\r\n        }\r\n        if (arr[i] === \"/\") {\r\n          arr[i] = \"%2F\";\r\n        }\r\n        if (arr[i] === \"?\") {\r\n          arr[i] = \"%3F\";\r\n        }\r\n        if (arr[i] === \"=\") {\r\n          arr[i] = \"%3D\";\r\n        }\r\n      }\r\n      var newStr = arr.join(\"\");\r\n      window.console.log(newStr);\r\n      return newStr;\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    window.console.log(\"阅读区\");\r\n    // to和from都储存的是路由的$route对象\r\n    // to是指被访问的路由，也就是当前路由\r\n    // from指的是从哪个路由跳过来的，上一个路由\r\n    window.console.log(to.query.id);\r\n    // 第一请求书源id\r\n    window.console.log(\r\n      \"第一次请求书源：\" +\r\n        \"http://novel.kele8.cn/book-sources?view=summary&book=\" +\r\n        to.query.id\r\n    );\r\n    Vue.axios(\r\n      \"http://novel.kele8.cn/book-sources?view=summary&book=\" + to.query.id\r\n    )\r\n      .then(res => {\r\n        window.console.log(res.data[0]._id);\r\n        // 第二次请求章节列表，得到各个章节的link\r\n        window.console.log(\r\n          \"第二次请求章节列表：\" +\r\n            \"http://novel.kele8.cn/book-chapters/\" +\r\n            res.data[0]._id\r\n        );\r\n        Vue.axios(\r\n          \"http://novel.kele8.cn/book-chapters/\" + res.data[0]._id\r\n        ).then(res2 => {\r\n          window.console.log(res2.data.chapters[0]);\r\n          next(vm => {\r\n            // 第三次请求章节内容与标题\r\n            window.console.log(\r\n              \"第三次请求章节内容：\" +\r\n                \"http://novel.kele8.cn/chapters/\" +\r\n                vm.formating(res2.data.chapters[0].link)\r\n            );\r\n            Vue.axios(\r\n              \"http://novel.kele8.cn/chapters/\" +\r\n                vm.formating(res2.data.chapters[0].link)\r\n            ).then(res3 => {\r\n              window.console.log(res3);\r\n\r\n              vm.zhangjielist = res2.data.chapters;\r\n\r\n              window.console.log(vm.list);\r\n              var obj = {\r\n                title: res3.data.chapter.title,\r\n                cpContent: res3.data.chapter.cpContent.split(\"\\n\")\r\n              };\r\n              vm.list[vm.index] = obj;\r\n              vm.loading = false;\r\n              vm.index++;\r\n            });\r\n          });\r\n        });\r\n      })\r\n      .catch();\r\n  },\r\n  created() {\r\n    window.console.log(\"阅读组件已创建\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less' spcode>\r\n.yuedubook {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #eee6dd;\r\n\r\n  padding-top: 0.66667rem;\r\n  text-align: left;\r\n  h2 {\r\n    margin: 0px;\r\n    color: #333;\r\n    padding: 0 0.53333rem;\r\n    line-height: 1.5;\r\n\r\n    font-size: 24px;\r\n  }\r\n\r\n  .yuedubook-box {\r\n    color: #333;\r\n    padding: 0.26667rem 0.53333rem 0;\r\n\r\n    p {\r\n      font-size: 20px;\r\n      color: #5c5d58;\r\n      // text-indent: 2em;\r\n      text-indent: 1cm;\r\n\r\n      line-height: 1.5;\r\n      margin: 0.3333rem 0;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}