{"remainingRequest":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\Classifycation.vue?vue&type=style&index=0&id=780eaae5&lang=less&scoped=true&","dependencies":[{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\src\\views\\Classifycation.vue","mtime":1584884604000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"g:\\1962VUE-cil-router\\vueAPp\\fictionapp\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnNlYXJjaExpc3Qgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiBhdXRvOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmMmVkOw0KICAubWFpbiB7DQogICAgcGFkZGluZy10b3A6IDgwcHg7DQogICAgJiA+IHVsIHsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgbWFyZ2luLXRvcDogMTBweDsNCiAgICAgICYgPiBsaSB7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4Ow0KICAgICAgICBwYWRkaW5nLWxlZnQ6IDE1cHg7DQogICAgICB9DQogICAgICAmID4gbGkuZm9vdGVyIHsNCiAgICAgICAgcGFkZGluZzogMTBweCAwOw0KICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHg7DQogICAgICAgIGhlaWdodDogMzBweDsNCiAgICAgICAgbGluZS1oZWlnaHQ6IDBweDsNCiAgICAgICAgc3BhbiB7DQogICAgICAgICAgY29sb3I6ICM5OTk7DQogICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgLndyYXBwZXIgew0KICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICB0b3A6IDM4cHg7DQogICAgbGVmdDogMDsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBjb2xvcjogIzY2NjsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgIHotaW5kZXg6IDEwMDsNCiAgICAuaXRlbSB7DQogICAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMXB4Ow0KICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgdHJhbnNwYXJlbnQgNTAlLCAjZGRkIDApOw0KICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsNCiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGJvdHRvbTsNCiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgaGVpZ2h0OiAxLjJyZW07DQogICAgICBsaW5lLWhlaWdodDogMS4ycmVtOw0KICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgIC50b3AxLA0KICAgICAgLnRvcDIgew0KICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgIG92ZXJmbG93LXg6IGF1dG87DQogICAgICAgIHVsIHsNCiAgICAgICAgICB3aWR0aDogYXV0bzsNCiAgICAgICAgICBoZWlnaHQ6IDEwMCU7DQogICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICAgICAgICBmb250LXNpemU6IDA7DQogICAgICAgICAgbGkgew0KICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgcGFkZGluZzogMCAwLjI2NjY3cmVtOw0KICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgICAgICYuYWN0aXZlIHsNCiAgICAgICAgICAgICAgY29sb3I6ICNiOTMzMjE7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAmLmZpcnN0LWNoaWxkIHsNCiAgICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAwLjRyZW07DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Classifycation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Classifycation.vue","sourceRoot":"views","sourcesContent":["<template>\r\n  <div class=\"searchList\">\r\n    <headshot :title=\"$route.params.id\" />\r\n    <div class=\"wrapper\">\r\n      <div class=\"item\">\r\n        <!-- 一级筛选type -->\r\n        <div class=\"top1\">\r\n          <ul>\r\n            <li\r\n              :class=\"{active: index === index1}\"\r\n              @click.stop=\"onClickTypeFn(item.type, index)\"\r\n              v-for=\"(item, index) in top1\"\r\n              :key=\"index\"\r\n            >{{item.title}}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div class=\"item\">\r\n        <!-- 二级筛选 -->\r\n        <div class=\"top2\">\r\n          <ul>\r\n            <li @click.stop=\"onclickMinorOne\" :class=\"{active: -1 === index2}\">全部</li>\r\n            <li\r\n              @click.stop=\"onClickMinorFn(item, index)\"\r\n              :class=\"{active: index === index2}\"\r\n              v-for=\"(item, index) in top2\"\r\n              :key=\"index\"\r\n            >{{item}}</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"main\">\r\n      <ul>\r\n        <li\r\n          v-for=\"(item, index) in SearchList\"\r\n          :key=\"index\"\r\n          @click.stop=\"goRoutexiangqingyeFn(item._id)\"\r\n        >\r\n          <searchitem :item=\"item\" />\r\n        </li>\r\n        <li class=\"footer\">\r\n          <span>没有更多书籍</span>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Vue from \"vue\";\r\nimport headshot from \"../components/headshot\";\r\nimport searchitem from \"../components/searchitem\";\r\nexport default {\r\n  name: \"SearchList\",\r\n  data() {\r\n    return {\r\n      SearchList: [],\r\n      type: \"hot\",\r\n      minor: \"\",\r\n      index1: 0,\r\n      index2: -1,\r\n      top1: [\r\n        {\r\n          title: \"热门\",\r\n          type: \"hot\"\r\n        },\r\n        {\r\n          title: \"新书\",\r\n          type: \"new\"\r\n        },\r\n        {\r\n          title: \"好评\",\r\n          type: \"reputation\"\r\n        },\r\n        {\r\n          title: \"完结\",\r\n          type: \"over\"\r\n        },\r\n        {\r\n          title: \"包月\",\r\n          type: \"monthly\"\r\n        }\r\n      ],\r\n      top2: []\r\n    };\r\n  },\r\n  computed: {},\r\n  components: {\r\n    headshot,\r\n    searchitem\r\n  },\r\n  methods: {\r\n    goRoutexiangqingyeFn(id) {\r\n      this.$router.push({\r\n        path: \"/xiangqingye\",\r\n        query: {\r\n          id: id\r\n        }\r\n      });\r\n    },\r\n    onClickTypeFn(type, index) {\r\n      this.type = type;\r\n      this.index1 = index;\r\n      this.ajaxupdata();\r\n    },\r\n    onClickMinorFn(minor, index) {\r\n      this.minor = minor;\r\n      this.index2 = index;\r\n      this.ajaxupdata();\r\n    },\r\n    onclickMinorOne() {\r\n      this.minor = \"\";\r\n      this.index2 = -1;\r\n      this.ajaxupdata();\r\n    },\r\n    ajaxupdata() {\r\n      this.axios\r\n        .get(\r\n          \"http://novel.kele8.cn/category-info?gender=\" +\r\n            this.$route.query.gender +\r\n            \"&type=\" +\r\n            this.type +\r\n            \"&major=\" +\r\n            this.$route.params.id +\r\n            \"&minor=\" +\r\n            this.minor +\r\n            \"&start=0&limit=20\"\r\n        )\r\n        .then(response => {\r\n          window.console.log(response);\r\n          this.SearchList = response.data.books;\r\n        });\r\n    }\r\n  },\r\n  // 组件内的守卫\r\n  // 在本组件被渲染时，被调用 / 组件实例被创建前执行\r\n  // 不能调用 组件实例 this\r\n  // 因为当前守卫执行时，组件实例还没有被创建\r\n  beforeRouteEnter(to, from, next) {\r\n    Vue.axios.get(\"http://novel.kele8.cn/sub-categories\").then(res => {\r\n      next(vm => {\r\n        for (let i = 0; i < res.data[to.query.gender].length; i++) {\r\n          if (res.data[to.query.gender][i].major === to.params.id) {\r\n            vm.top2 = res.data[to.query.gender][i].mins;\r\n          }\r\n        }\r\n\r\n        vm.axios\r\n          .get(\r\n            \"http://novel.kele8.cn/category-info?gender=\" +\r\n              to.query.gender +\r\n              \"&type=\" +\r\n              vm.type +\r\n              \"&major=\" +\r\n              to.params.id +\r\n              \"&minor=\" +\r\n              vm.minor +\r\n              \"&start=0&limit=20\"\r\n          )\r\n          .then(response => {\r\n            window.console.log(response);\r\n            vm.SearchList = response.data.books;\r\n          });\r\n      });\r\n    });\r\n  }\r\n};\r\n</script>\r\n<style lang='less' scoped>\r\n.searchList {\r\n  width: 100%;\r\n  height: auto;\r\n  background-color: #f5f2ed;\r\n  .main {\r\n    padding-top: 80px;\r\n    & > ul {\r\n      width: 100%;\r\n      height: auto;\r\n      margin-top: 10px;\r\n      & > li {\r\n        width: 100%;\r\n        margin-bottom: 10px;\r\n        padding-left: 15px;\r\n      }\r\n      & > li.footer {\r\n        padding: 10px 0;\r\n        margin-bottom: 0px;\r\n        height: 30px;\r\n        line-height: 0px;\r\n        span {\r\n          color: #999;\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .wrapper {\r\n    position: fixed;\r\n    top: 38px;\r\n    left: 0;\r\n    width: 100%;\r\n    color: #666;\r\n    background-color: #fff;\r\n    z-index: 100;\r\n    .item {\r\n      background-size: 100% 1px;\r\n      background-image: linear-gradient(180deg, transparent 50%, #ddd 0);\r\n      background-repeat: no-repeat;\r\n      background-position: bottom;\r\n      position: relative;\r\n      width: 100%;\r\n      height: 1.2rem;\r\n      line-height: 1.2rem;\r\n      overflow: hidden;\r\n      .top1,\r\n      .top2 {\r\n        height: 100%;\r\n        overflow-x: auto;\r\n        ul {\r\n          width: auto;\r\n          height: 100%;\r\n          white-space: nowrap;\r\n          text-overflow: ellipsis;\r\n          font-size: 0;\r\n          li {\r\n            display: inline-block;\r\n            height: 100%;\r\n            padding: 0 0.26667rem;\r\n            font-size: 13px;\r\n            text-align: left;\r\n            &.active {\r\n              color: #b93321;\r\n            }\r\n            &.first-child {\r\n              padding-left: 0.4rem;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>>\r\n"]}]}